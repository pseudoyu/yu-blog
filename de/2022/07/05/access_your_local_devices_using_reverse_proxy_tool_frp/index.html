<!doctype html><html lang=de itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.105.0"><meta charset=utf-8><title>Workflow zur Entwicklung von Thin Clients basierend auf frp-Intranet-Penetration · Pseudoyu</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script data-goatcounter=https://stats.pseudoyu.com/count async src=//stats.pseudoyu.com/count.js></script><meta name=description content="&amp;#39;Here After Us - Mayday&amp;#39; Vorwort In meinem vorherigen Projekt &amp;ldquo;GitHub - Personal Toolbox&amp;rdquo; erwähnte ich, dass ich zu Hause ein Mac Studio habe, das immer eingeschaltet ist, und einen Raspberry Pi 3b+ Mikrocomputer, auf dem Ubuntu läuft. Wenn ich zu Hause bin, bediene ich normalerweise das Mac Studio, das an einen Monitor angeschlossen ist, oder greife über SSH vom Terminal meines Chromebooks darauf zu.
Nach dem Ende der Fernarbeit muss ich täglich zwischen Büro und Zuhause pendeln."><meta name=keywords content="hugo,blockchain,programming"><link rel=canonical href=https://www.pseudoyu.com/de/2022/07/05/access_your_local_devices_using_reverse_proxy_tool_frp/><link rel=alternate href=https://www.pseudoyu.com/zh/2022/07/05/access_your_local_devices_using_reverse_proxy_tool_frp/ hreflang=zh><link rel=alternate href=https://www.pseudoyu.com/en/2022/07/05/access_your_local_devices_using_reverse_proxy_tool_frp/ hreflang=en><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href=https://www.pseudoyu.com/css/den.css><link rel=stylesheet href=https://www.pseudoyu.com/css/custom.css><meta property="og:title" content="Workflow zur Entwicklung von Thin Clients basierend auf frp-Intranet-Penetration"><meta property="og:description" content="'Here After Us - Mayday' Vorwort In meinem vorherigen Projekt &ldquo;GitHub - Personal Toolbox&rdquo; erwähnte ich, dass ich zu Hause ein Mac Studio habe, das immer eingeschaltet ist, und einen Raspberry Pi 3b+ Mikrocomputer, auf dem Ubuntu läuft. Wenn ich zu Hause bin, bediene ich normalerweise das Mac Studio, das an einen Monitor angeschlossen ist, oder greife über SSH vom Terminal meines Chromebooks darauf zu.
Nach dem Ende der Fernarbeit muss ich täglich zwischen Büro und Zuhause pendeln."><meta property="og:type" content="article"><meta property="og:url" content="https://www.pseudoyu.com/de/2022/07/05/access_your_local_devices_using_reverse_proxy_tool_frp/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-05T10:00:16+08:00"><meta property="article:modified_time" content="2022-07-05T10:00:16+08:00"><meta itemprop=name content="Workflow zur Entwicklung von Thin Clients basierend auf frp-Intranet-Penetration"><meta itemprop=description content="'Here After Us - Mayday' Vorwort In meinem vorherigen Projekt &ldquo;GitHub - Personal Toolbox&rdquo; erwähnte ich, dass ich zu Hause ein Mac Studio habe, das immer eingeschaltet ist, und einen Raspberry Pi 3b+ Mikrocomputer, auf dem Ubuntu läuft. Wenn ich zu Hause bin, bediene ich normalerweise das Mac Studio, das an einen Monitor angeschlossen ist, oder greife über SSH vom Terminal meines Chromebooks darauf zu.
Nach dem Ende der Fernarbeit muss ich täglich zwischen Büro und Zuhause pendeln."><meta itemprop=datePublished content="2022-07-05T10:00:16+08:00"><meta itemprop=dateModified content="2022-07-05T10:00:16+08:00"><meta itemprop=wordCount content="2427"><meta itemprop=keywords content="frp,proxy,network,dev-environment,devices,tools,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Workflow zur Entwicklung von Thin Clients basierend auf frp-Intranet-Penetration"><meta name=twitter:description content="'Here After Us - Mayday' Vorwort In meinem vorherigen Projekt &ldquo;GitHub - Personal Toolbox&rdquo; erwähnte ich, dass ich zu Hause ein Mac Studio habe, das immer eingeschaltet ist, und einen Raspberry Pi 3b+ Mikrocomputer, auf dem Ubuntu läuft. Wenn ich zu Hause bin, bediene ich normalerweise das Mac Studio, das an einen Monitor angeschlossen ist, oder greife über SSH vom Terminal meines Chromebooks darauf zu.
Nach dem Ende der Fernarbeit muss ich täglich zwischen Büro und Zuhause pendeln."></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://www.pseudoyu.com/images/background.webp);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://www.pseudoyu.com/de/><img class="mr20 header-logo-image" src=https://image.pseudoyu.com/images/fly.png alt=logo>
Pseudoyu</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/ideas/>Ideen</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/tools/>Tools</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/develop/>Code</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/links/>Links</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/search/>Suche</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/about/>Über</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/zh/><i class="fas fa-globe"></i> 简</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/><i class="fas fa-globe"></i> EN</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>Workflow zur Entwicklung von Thin Clients basierend auf frp-Intranet-Penetration</h1><p class=header-date>Autor:
pseudoyu
| <span>2427 Wörter, 12 Minuten</span>
| <span class=remark42__counter data-url=https://www.pseudoyu.com/de/2022/07/05/access_your_local_devices_using_reverse_proxy_tool_frp/></span> Kommentare
| 2022-07-05
| Kategorie:
<a href=https://www.pseudoyu.com/de/category/tools/>Tools</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://www.pseudoyu.com/de/tag/dev-environment/>dev-environment</a>,
<a href=https://www.pseudoyu.com/de/tag/devices/>devices</a>,
<a href=https://www.pseudoyu.com/de/tag/frp/>frp</a>,
<a href=https://www.pseudoyu.com/de/tag/network/>network</a>,
<a href=https://www.pseudoyu.com/de/tag/proxy/>proxy</a>,
<a href=https://www.pseudoyu.com/de/tag/tools/>tools</a></p><div class=clearfix></div><p class="float-right translations"><i class="fas fa-language" aria-hidden=true></i>
Übersetzungen:
<a href=https://www.pseudoyu.com/zh/2022/07/05/access_your_local_devices_using_reverse_proxy_tool_frp/>ZH</a>, <a href=https://www.pseudoyu.com/en/2022/07/05/access_your_local_devices_using_reverse_proxy_tool_frp/>EN</a></p></div></div></div></div></div><main><div class="container content"><articl data-pagefind-body><figure><audio controls preload=metadata><source src=/audios/here_after_us.mp3 type=audio/mpeg></audio><i><figcaption>'Here After Us - Mayday'</figcaption></i></figure><h2 id=vorwort>Vorwort</h2><p><img src=https://image.pseudoyu.com/images/leopold_fc660c.jpg alt=leopold_fc660c></p><p>In meinem vorherigen Projekt <a href=https://github.com/pseudoyu/yu-tools>&ldquo;GitHub - Personal Toolbox&rdquo;</a> erwähnte ich, dass ich zu Hause ein Mac Studio habe, das immer eingeschaltet ist, und einen Raspberry Pi 3b+ Mikrocomputer, auf dem Ubuntu läuft. Wenn ich zu Hause bin, bediene ich normalerweise das Mac Studio, das an einen Monitor angeschlossen ist, oder greife über SSH vom Terminal meines Chromebooks darauf zu.</p><p>Nach dem Ende der Fernarbeit muss ich täglich zwischen Büro und Zuhause pendeln. Da ich nicht jeden Tag einen Laptop mit mir herumtragen möchte, habe ich meinen vorherigen 16-Zoll MacBook Pro Hauptentwicklungsrechner (der wirklich schwer ist) im Büro für die Entwicklung von Arbeitsprojekten gelassen. Obwohl ich Code über GitHub und GitLab sowie Dateien über OneDrive und iCloud synchronisieren kann, hatte ich trotzdem das Gefühl, jeden Tag zwei Desktop-Entwicklungsumgebungen zu pflegen. Einige Konfigurationsänderungen der Umgebung erforderten den doppelten Arbeitsaufwand, was eine erhebliche mentale Belastung mit sich brachte.</p><p>Darüber hinaus ist die Leistung des M1 Max Chip-Geräts zu Hause weitaus besser als die des alten Intel MacBook Pro Laptops. Also begann ich, Lösungen zu erkunden, um von zu Hause aus über das öffentliche Netzwerk auf Geräte zuzugreifen, und praktizierte einen Workflow für Thin Clients. Dieser Artikel ist eine Aufzeichnung und Zusammenfassung dieses Workflows.</p><h2 id=thin-client-workflow>Thin Client Workflow</h2><p>Ich wurde durch diese Episode des <a href=https://teahour.fm>&ldquo;Teahour&rdquo;</a> Podcasts inspiriert: <a href=https://teahour.fm/95>"#95 - Wie ist es, auf einem Chromebook zu entwickeln?"</a>, wo ich zum ersten Mal von dem Thin-Client-Entwicklungsmodell erfuhr.</p><h3 id=grundlegende-konzepte>Grundlegende Konzepte</h3><p>Die Entwicklung von Thin Clients ist ein zunehmend beliebtes Entwicklungsmodell. Die Hauptidee besteht darin, dass die von Ihnen verwendeten Entwicklungseingabegeräte (wie Laptops, Tablets usw.) keine verschiedenen Entwicklungsumgebungen installieren. Stattdessen verwenden sie Terminal, VS Code Remote oder Jetbrains Client und andere Client-Programme als Eingangspunkte, um eine Verbindung zu Ihrem Remote-Host oder Server herzustellen. Diese Methode hat folgende Vorteile:</p><ol><li>Sie kann Ihre Entwicklungsumgebung weitestgehend vereinfachen. Sie benötigen nur ein Terminal und einen Browser, um die meisten Entwicklungsarbeiten durchzuführen, was die Gerätekosten reduzieren kann. Sie können sogar ein Chromebook oder iPad verwenden, um die tägliche Entwicklungsarbeit zu erledigen.</li><li>Sie reduziert die Einschränkungen des Bürostandorts. Sie können tragbare Geräte mitnehmen und frei in Cafés oder anderen Orten arbeiten. Im Vergleich zum lokalen Betrieb verschiedener Entwicklungsumgebungen hat diese Methode auch eine längere Akkulaufzeit.</li><li>Unabhängig davon, welches Gerät Sie für den Entwicklungszugriff verwenden, können Sie sicherstellen, dass Ihre Entwicklungsumgebung und Ihr Fortschritt konsistent bleiben, wodurch die Kosten für die Synchronisierung und Wartung der Umgebung reduziert werden.</li><li>Oft ist unsere Entwicklungsumgebung ein macOS- oder Windows-Betriebssystem. Manchmal kann die lokale Entwicklungsumgebung einige Unterschiede zur tatsächlichen Projektlaufzeitumgebung aufweisen. Die Fernentwicklung in einem Linux-System kann diese Unterschiede effektiv reduzieren und die Entwicklungseffizienz verbessern.</li><li>Wir können den Großteil unserer Kosten auf ein relativ leistungsfähiges Gerät konzentrieren, um langfristige Entwicklungsbedürfnisse zu erfüllen.</li><li>Wenn es vorübergehende Entwicklungsbedürfnisse gibt, können wir nach Bedarf einige Cloud-Server starten und stoppen, was Kosten spart und die Entwicklungseffizienz verbessert.</li><li>In Bereichen wie Deep Learning, die spezielle Geräte wie GPUs für Berechnungen erfordern, kann die Entwicklung nicht auf lokalen Maschinen durchgeführt werden.</li></ol><h3 id=mein-thin-client-workflow>Mein Thin Client Workflow</h3><p><img src=https://image.pseudoyu.com/images/thin_client_structure.png alt=thin_client_structure></p><p>Um Kosten zu reduzieren, basiert mein Thin-Client-Workflow hauptsächlich auf einer selbst eingerichteten Intranet-Penetrationslösung (das Schemaprinzip und die Einrichtungsmethode werden später detailliert erklärt). Er greift von verschiedenen Clients im öffentlichen Netzwerk auf den leistungsfähigeren Host und Server zu Hause zu, um die Hauptentwicklungsarbeit abzuschließen.</p><p>Meine Hauptgeräte auf der Clientseite sind derzeit:</p><ol><li>16-Zoll MacBook Pro, langfristig im Büro platziert, als Arbeitsgerät genutzt, hauptsächlich zum Durchsuchen von Webseiten, Dokumenten und zum Verbinden mit verschiedenen Remote-Hosts oder Servern für Entwicklungsarbeiten durch das iTerm2-Terminal-Tool und zum Verwalten von Code und Projekten über Git.</li><li>Google Pixelbook Go, hauptsächlich in Cafés, auf der Couch zu Hause oder an anderen Orten für technisches Lernen, Blogschreiben oder persönliche Projektentwicklung verwendet.</li></ol><p>Meine Server sind in folgende Kategorien unterteilt:</p><ol><li>Mac Studio Host, an die Stromversorgung angeschlossen und immer eingeschaltet, ist mein Hauptserver. Er ist für Clients aus dem öffentlichen Netzwerk durch Intranet-Penetration zugänglich. Wenn ich zu Hause arbeite oder studiere, kann er auch als Client verwendet werden, um sich mit anderen Server-Hosts zu verbinden, wenn er an einen Bildschirm und eine Tastatur/Maus angeschlossen ist.</li><li>Raspberry Pi, mit Ubuntu-System installiert als Hauptservice-Lauf- und Debugging-Umgebung, hauptsächlich für den Betrieb einiger Dienste, für Clients aus dem öffentlichen Netzwerk durch Intranet-Penetration zugänglich.</li><li>Persönlicher Alibaba Cloud ECS, Tencent Cloud Lightweight Server oder andere vom Unternehmen bereitgestellte Projektentwicklungsumgebungen, hauptsächlich für den Betrieb und das Debugging einiger Projektdienste, wie z.B. Chain-Umgebungen.</li><li>GitHub Codespaces, am internen Test teilgenommen. GitHub stellt Laufzeitumgebungen für bis zu 10 persönliche Projekte bereit. Ich verwende es hauptsächlich für die Entwicklung von Solidity-, Rust- oder Frontend-Lernprojekten. Auf diese Weise kann ich eine konsistente Umgebung sicherstellen, wenn ich mich von verschiedenen Maschinen oder sogar Browsern aus verbinde, ohne sie selbst neu konfigurieren und einrichten zu müssen. Aus Sicherheitsüberlegungen werde ich jedoch keine Arbeitsprojekte oder einige Projekte mit persönlichen sensiblen Informationen ausführen.</li></ol><h3 id=meine-erfahrung-mit-der-thin-client-entwicklung>Meine Erfahrung mit der Thin-Client-Entwicklung</h3><p>Der Thin Client ist nicht nur eine Optimierung von Werkzeugen und Techniken; seine ursprüngliche Absicht ist eine Art &ldquo;Minimalismus&rdquo; im Arbeitsmodus. Nach mehrmonatiger Praxis dieses Entwicklungsmodus kann ich deutlich spüren, dass die Zeit, die ich für das Debugging und die Wartung der Entwicklungsumgebung aufwende, abgenommen hat, und ich mehr Aufmerksamkeit auf den Code und die Dienste selbst gelegt habe. Das nahtlose Umschalten zwischen den Modi &ldquo;sofortige Verwendung&rdquo; und &ldquo;bei Bedarf&rdquo; ermöglicht es mir auch, jederzeit Arbeitszustände und Projekte zu wechseln, was die Zeitkosten wie Umgebungs-Kaltstart und Konfiguration erheblich reduziert.</p><p>Obwohl ich meine eigene Verfolgung der Software- und Hardware-Benutzererfahrung habe, bin ich keine Person, die in allen Aspekten Extreme verfolgt. Stattdessen folge ich einer &ldquo;Just Enough&rdquo;-Philosophie, die meine aktuellen Nutzungsbedürfnisse befriedigt. Zum Beispiel habe ich in Bezug auf die Netzwerkumgebung zu Hause nur eine gewöhnliche 100M-Breitbandnetzwerkumgebung und habe nicht absichtlich an Bandbreite und Routern herumgebastelt. Insgesamt ist die Netzwerklatenz während des Betriebs, sei es bei der Tastatureingabe oder beim Erhalten von Echtzeitanzeigen, fast vernachlässigbar (mein Hauptnutzungsszenario ist die Verwendung von VS Code Remote oder iTerm2-Terminal-Tool auf macOS-System, um über SSH eine Verbindung zu Remote-Hosts oder Servern für die Entwicklung herzustellen, und gelegentlich die Verwendung der SFTP-Funktion von Termius für die Dateiübertragung, als Referenz). Es gibt fast keine Unterbrechungen aufgrund der Netzwerkumgebung.</p><p>Ich habe VNC nur für die Remote-Desktop-Steuerung bei der Konfiguration des Raspberry Pi verwendet und keine anderen Operationen durchgeführt, die stark von der grafischen Benutzeroberfläche abhängig sind. Die Netzwerklatenz ist akzeptabel, aber nicht sehr empfehlenswert.</p><h2 id=anforderungsanalyse-für-den-fernzugriff-auf-das-netzwerk>Anforderungsanalyse für den Fernzugriff auf das Netzwerk</h2><p><img src=https://image.pseudoyu.com/images/raspberry_pi.jpg alt=raspberry_pi></p><p>Bezüglich der Schemata und Prinzipien des Fernzugriffs auf das Netzwerk hat der Artikel <a href=https://sspai.com/prime/story/remote-lan-access-guide-01>&ldquo;Leitfaden für den Fernzugriff auf LAN&rdquo;</a> auf Sspai bereits verschiedene Schemata detailliert und bewertet. Ich berücksichtige nur die Benutzerfreundlichkeit und die Kosten des Schemas gemäß den persönlichen Bedürfnissen. Sie können selbst lesen und das geeignete Schema auswählen.</p><p>Zunächst habe ich die Netzwerkbedingungen und Anforderungen sortiert.</p><p>Netzwerkbedingungen:</p><ol><li>Kurzfristig eingerichtetes Breitband für die Miete, keine öffentliche IP bereitgestellt, eine zu beantragen ist wahrscheinlich sehr umständlich.</li><li>Der Heim-WLAN-Router scheint nur ein gewöhnlicher Xiaomi-Router zu sein, habe nicht viel daran herumgebastelt.</li><li>Aufgrund von Arbeits- und persönlichen Entwicklungsbedürfnissen habe ich langfristig Server auf Alibaba Cloud und Tencent Cloud erneuert, mit öffentlichen IPs.</li></ol><p>Anforderungen an die Fernverbindung:</p><ol><li>Zugriff auf den Mac Studio Host über SSH durch das öffentliche Netzwerk und bei Bedarf Öffnung spezifischer Ports.</li><li>Zugriff auf den Raspberry Pi über SSH durch das öffentliche Netzwerk und bei Bedarf Öffnung spezifischer Ports.</li><li>Erfordert eine stabile und schnelle Verbindung und versucht, bestehende Software und Dienste wiederzuverwenden, um zusätzliche Kosten zu vermeiden.</li><li>Einfach zu erweitern für neue Geräte (wie den Kauf neuer Raspberry Pis) und zur Konfiguration neuer Port-Mappings (Öffnung neuer Dienste).</li><li>Da das Heimnetzwerk vollständig von Surge als Software-Router verwaltet wird, wurden bereits Konfigurationen wie das Schließen von DHCP vorgenommen, also versuchen Sie, keine Konfigurationen auf der Ebene des optischen Modems und Routers vorzunehmen.</li><li>Fähigkeit, den Verbindungsstatus der Heimnetzwerkumgebung und den Ressourcenstatus des Raspberry Pi-Servers in Echtzeit zu überwachen.</li></ol><h2 id=frp-intranet-penetrationslösung>frp Intranet-Penetrationslösung</h2><p>Nach einigen Recherchen habe ich mich für das Open-Source-Projekt <a href=https://github.com/fatedier/frp>&ldquo;GitHub - fatedier/frp&rdquo;</a> entschieden. Laut seiner offiziellen Dokumentation:</p><blockquote><p>frp ist eine leistungsstarke Reverse-Proxy-Anwendung, die sich auf Intranet-Penetration konzentriert. Es unterstützt mehrere Protokolle wie TCP, UDP, HTTP, HTTPS. Es kann Intranet-Dienste sicher und bequem über Knoten mit öffentlicher IP in das öffentliche Netzwerk exponieren. Durch die Bereitstellung des frp-Servers auf Knoten mit öffentlicher IP können Intranet-Dienste leicht in das öffentliche Netzwerk durchdrungen werden, während viele professionelle Funktionen bereitgestellt werden.</p></blockquote><p>Dies erfüllt perfekt meine Bedürfnisse. Ich muss nur meinen gekauften Alibaba Cloud Server mit öffentlicher IP als Transitserver wiederverwenden, den frp-Server bereitstellen, die entsprechenden Ports exponieren, den frp-Client auf Heimgeräten bereitstellen, die vom öffentlichen Netzwerk aus zugänglich sein müssen, und Port-Mapping durchführen, um Intranet-Penetration zu erreichen.</p><h3 id=lösungsarchitektur>Lösungsarchitektur</h3><p><img src=https://image.pseudoyu.com/images/frp_structure.png alt=frp_structure></p><p>Zunächst habe ich den frp-Server auf meinem Server mit öffentlicher IP bereitgestellt und die entsprechenden Ports exponiert.</p><p>In meiner Heimintranet-Umgebung gibt es hauptsächlich zwei Geräte, die immer an die Stromversorgung angeschlossen und eingeschaltet sind, ein Mac Studio Host und ein Raspberry Pi Server mit Ubuntu-Betriebssystem, die hauptsächlich über Netzwerkkabel/WLAN mit dem WLAN-Router verbunden sind. Ich habe den frp-Client auf beiden Maschinen gemäß den offiziellen Anweisungen installiert und ausgeführt, konfiguriert, um eine Verbindung zum frp-Server herzustellen, und die Dienstports gemappt, die geöffnet werden müssen (wie z.B. das Mapping des SSH-Dienstports 22 des Raspberry Pi auf Port 6002 des Alibaba Cloud Servers). Erwähnenswert ist, dass der frp-Client aktiv Anfragen an den Server sendet, sodass keine Neukonfiguration erforderlich ist, selbst wenn sich die Netzwerkumgebung ändert, solange seine Netzwerkumgebung auf den Transitserver zugreifen kann, auf dem der frp-Server installiert ist.</p><p>An diesem Punkt kann mein Alibaba Cloud Transitserver unsere Intranet-Umgebung und -Dienste der öffentlichen Netzwerkumgebung zugänglich machen. Wenn ich im Büro bin, kann ich über das öffentliche Netzwerk des Alibaba Cloud Servers + den entsprechenden Dienstport mit einem Laptop, Tablet oder Telefon darauf zugreifen, z.B. um über das Terminal eine Remote-SSH-Verbindung zum Mac Studio für Entwicklungsarbeiten herzustellen.</p><p>Gleichzeitig wollen wir den Status der Heimnetzwerkumgebung und der beiden Hosts in Echtzeit für Wartungszwecke überwachen. Ich habe den Surge macOS-Client als Software-Router verwendet, um alle Geräte im Heimnetzwerk zu verwalten, und die Cloud-Benachrichtigungsfunktion des Surge iOS-Clients genutzt, um den Status des Heimnetzwerks in Echtzeit zu überwachen. Darüber hinaus habe ich die ServerCat-Software verwendet, um die Ressourcen des Raspberry Pi-Servers zu Hause zu überwachen, sogar bis hin zur Temperatur, was sich nicht von der Cloud-Server-Erfahrung unterscheidet.</p><p><img src=https://image.pseudoyu.com/images/servercat_monitor_raspberry_pi.png alt=servercat_monitor_raspberry_pi></p><p>Die Konfiguration von frp ist relativ einfach, folgen Sie einfach der offiziellen Dokumentation. Mein Konfigurationsprozess ist wie folgt.</p><h3 id=frp-server-konfiguration>frp Server-Konfiguration</h3><p>Meine Alibaba Cloud ist mit dem CentOS-Betriebssystem installiert, andere Linux-Distributionen sind ähnlich.</p><h4 id=service-installation-und--konfiguration>Service-Installation und -Konfiguration</h4><p>Melden Sie sich zunächst am Terminal des Alibaba Cloud Servers an und installieren und laden Sie das frp-Programm über die folgenden Befehle herunter (beachten Sie, dass Sie die Version herunterladen müssen, die Ihrem Betriebssystem entspricht, von der <a href=https://github.com/fatedier/frp/releases>Releases</a>-Seite des <a href=https://github.com/fatedier/frp>&ldquo;GitHub - fatedier/frp&rdquo;</a>-Projekts), entpacken Sie es und wechseln Sie in das Verzeichnis.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://github.com/fatedier/frp/releases/download/v0.43.0/frp_0.43.0_linux_amd64.tar.gz
</span></span><span class=line><span class=cl>tar -zxvf frp_0.43.0_linux_amd64.tar.gz
</span></span><span class=line><span class=cl><span class=nb>cd</span> frp_0.43.0_linux_amd64/
</span></span></code></pre></div><p>Die <code>frps</code> und <code>frps.ini</code> sind die Dateien, auf die wir uns konzentrieren müssen. <code>frps</code> ist das Serverprogramm, während <code>frps.ini</code> die entsprechende Konfigurationsdatei ist. Wir verwenden <code>vi frps.ini</code>, um die Konfigurationsdatei zu bearbeiten:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>[common]
</span></span><span class=line><span class=cl>bind_port = 7000
</span></span><span class=line><span class=cl>dashboard_port = 7002
</span></span><span class=line><span class=cl>token = password
</span></span><span class=line><span class=cl>dashboard_user = admin
</span></span><span class=line><span class=cl>dashboard_pwd = 123456
</span></span><span class=line><span class=cl>vhost_http_port = 8080
</span></span></code></pre></div><p>Da ich den Betrieb unseres frp-Dienstes über die Konsole visualisieren möchte, habe ich auch dashboard-bezogene Parameter konfiguriert, die Sie nach Ihren eigenen Bedürfnissen wählen können. Speichern oder merken Sie sich diese Konfiguration, da sie später benötigt wird, wenn der frp-Client eine Verbindung zum Server herstellt. Nach dem Speichern der Konfiguration können Sie den Server mit <code>./frps -c frps.ini</code> starten.</p><p>Natürlich müssen wir es so konfigurieren, dass es automatisch startet und im Hintergrund läuft, um zu vermeiden, dass wir bei jedem Neustart des Servers neu konfigurieren müssen.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /lib/systemd/system/frps.service
</span></span></code></pre></div><p>Fügen Sie den folgenden Inhalt hinzu und speichern Sie ihn, beachten Sie, dass Sie die Pfade von <code>frps</code> und <code>frps.ini</code> zu Ihren tatsächlichen Pfaden ändern müssen.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>[Unit]
</span></span><span class=line><span class=cl>Description=frps service
</span></span><span class=line><span class=cl>After=network.target syslog.target
</span></span><span class=line><span class=cl>Wants=network.target
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Service]
</span></span><span class=line><span class=cl>Type=simple
</span></span><span class=line><span class=cl>ExecStart=/path/to/frps -c /path/to/frps.ini
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Install]
</span></span><span class=line><span class=cl>WantedBy=multi-user.target
</span></span></code></pre></div><h4 id=service-start-und-konfiguration-des-automatischen-starts-beim-booten>Service-Start und Konfiguration des automatischen Starts beim Booten</h4><p>Nach Abschluss der Konfiguration können Sie den Server mit <code>systemctl start frps</code> starten.</p><p>Wir geben den folgenden Befehl in der Befehlszeile ein, um den Dienst so zu konfigurieren, dass er beim Booten automatisch startet:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>systemctl <span class=nb>enable</span> frps
</span></span></code></pre></div><p>An diesem Punkt ist unsere Serverkonfiguration abgeschlossen.</p><h3 id=frp-client-konfiguration>frp Client-Konfiguration</h3><h4 id=service-installation-und--konfiguration-1>Service-Installation und -Konfiguration</h4><p>Die frp-Client-Konfiguration ähnelt der Serverkonfiguration. Laden Sie die entsprechende Version des frp-Programms über den <code>wget</code>-Befehl herunter, entpacken Sie es und wechseln Sie in das Verzeichnis.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget https://github.com/fatedier/frp/releases/download/v0.43.0/frp_0.43.0_linux_amd64.tar.gz
</span></span><span class=line><span class=cl>tar -zxvf frp_0.43.0_linux_amd64.tar.gz
</span></span><span class=line><span class=cl><span class=nb>cd</span> frp_0.43.0_linux_amd64/
</span></span></code></pre></div><p>Die <code>frpc</code> und <code>frpc.ini</code> sind die Dateien, auf die wir uns konzentrieren müssen. <code>frpc</code> ist das Client-Programm, während <code>frpc.ini</code> die entsprechende Konfigurationsdatei ist. Wir verwenden <code>vi frpc.ini</code>, um die Konfigurationsdatei zu bearbeiten:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>[common]
</span></span><span class=line><span class=cl>server_addr = 114.114.114.114
</span></span><span class=line><span class=cl>server_port = 7000
</span></span><span class=line><span class=cl>token = password
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[pi]
</span></span><span class=line><span class=cl>type = tcp
</span></span><span class=line><span class=cl>local_ip = 127.0.0.1
</span></span><span class=line><span class=cl>local_port = 22
</span></span><span class=line><span class=cl>remote_port = 6001
</span></span></code></pre></div><p>Die <code>server_addr</code> und <code>server_port</code> hier müssen mit der tatsächlichen öffentlichen IP und dem Port des Transitservers ausgefüllt werden, und <code>token</code> muss mit dem zuvor konfigurierten Token ausgefüllt werden; darunter befindet sich die Port-Mapping-Konfiguration für den Dienst, den Sie verbinden müssen, <code>local_ip</code> und <code>local_port</code> müssen mit der lokalen IP und dem Port des Clients ausgefüllt werden, wie z.B. <code>127.0.0.1</code> und <code>22</code>, wenn Sie den SSH-Dienst aktivieren müssen, während der letzte <code>remote_port</code> das Port-Mapping dieses Ports im Transitserver ist.</p><h4 id=service-start-und-konfiguration-des-automatischen-starts-beim-booten-1>Service-Start und Konfiguration des automatischen Starts beim Booten</h4><h5 id=ubuntu>Ubuntu</h5><p>Im Ubuntu-System des Raspberry Pi erstellen oder bearbeiten wir die fprc-Dienstkonfigurationsdatei über <code>vi /etc/systemd/system/frpc.service</code>, fügen den folgenden Inhalt hinzu und speichern ihn. Ähnlich müssen Sie <code>fprc</code> und <code>fprc.ini</code> zu Ihren tatsächlichen Pfaden ändern.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>[Unit]
</span></span><span class=line><span class=cl>Description=frpc daemon
</span></span><span class=line><span class=cl>After=syslog.target  network.target
</span></span><span class=line><span class=cl>Wants=network.target
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Service]
</span></span><span class=line><span class=cl>Type=simple
</span></span><span class=line><span class=cl>ExecStart=/path/to/frpc -c /path/to/frpc.ini
</span></span><span class=line><span class=cl>Restart= always
</span></span><span class=line><span class=cl>RestartSec=1min
</span></span><span class=line><span class=cl>ExecStop=/usr/bin/killall frpc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Install]
</span></span><span class=line><span class=cl>WantedBy=multi-user.target
</span></span></code></pre></div><p>Nach Abschluss der Konfiguration aktivieren Sie den automatischen Dienststart mit <code>sudo systemctl enable frpc.service</code> und starten den Client-Dienst mit <code>sudo systemctl start frpc.service</code>.</p><h5 id=macos>macOS</h5><p>Im macOS-System bearbeiten wir die plist über <code>vi ~/Library/LaunchAgents/frpc.plist</code>, um den automatischen Dienststart hinzuzufügen. Ähnlich müssen Sie <code>fprc</code> und <code>fprc.ini</code> zu Ihren tatsächlichen Pfaden ändern.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
</span></span><span class=line><span class=cl>&lt;!DOCTYPE plist PUBLIC -//Apple Computer//DTD PLIST 1.0//EN
</span></span><span class=line><span class=cl>http://www.apple.com/DTDs/PropertyList-1.0.dtd &gt;
</span></span><span class=line><span class=cl>&lt;plist version=&#34;1.0&#34;&gt;
</span></span><span class=line><span class=cl>&lt;dict&gt;
</span></span><span class=line><span class=cl>&lt;key&gt;Label&lt;/key&gt;
</span></span><span class=line><span class=cl>&lt;string&gt;frpc&lt;/string&gt;
</span></span><span class=line><span class=cl>&lt;key&gt;ProgramArguments&lt;/key&gt;
</span></span><span class=line><span class=cl>&lt;array&gt;
</span></span><span class=line><span class=cl>&lt;string&gt;/path/to/frpc&lt;/string&gt;
</span></span><span class=line><span class=cl>&lt;string&gt;-c&lt;/string&gt;
</span></span><span class=line><span class=cl>&lt;string&gt;/path/to/frpc.ini&lt;/string&gt;
</span></span><span class=line><span class=cl>&lt;/array&gt;
</span></span><span class=line><span class=cl>&lt;key&gt;KeepAlive&lt;/key&gt;
</span></span><span class=line><span class=cl>&lt;true/&gt;
</span></span><span class=line><span class=cl>&lt;key&gt;RunAtLoad&lt;/key&gt;
</span></span><span class=line><span class=cl>&lt;true/&gt;
</span></span><span class=line><span class=cl>&lt;/dict&gt;
</span></span><span class=line><span class=cl>&lt;/plist&gt;
</span></span></code></pre></div><p>An diesem Punkt können wir in der öffentlichen Netzwerkumgebung über die entsprechenden Ports des Transitservers auf unsere Intranet-Dienste zugreifen, und die Dienste starten automatisch beim Booten, sowohl auf der Serverseite als auch auf der Clientseite. Wir können auf die frp-Konsole über <code>&lt;öffentliche IP></code> + den <code>dashboard_port</code>-Port zugreifen, den wir gerade auf der Serverseite konfiguriert haben, um die Verkehrssituation jedes Dienstes zu sehen.</p><p><img src=https://image.pseudoyu.com/images/frp_dashboard.png alt=frp_dashboard></p><h2 id=fazit>Fazit</h2><p>Das oben Genannte ist meine Praxis und Zusammenfassung des öffentlichen Netzwerk-Fernzugriffs auf Heimgeräte und des Thin-Client-Workflows. Dies bringt eine interessante Entwicklungserfahrung, die sich vom traditionellen Modus unterscheidet. Interessierte Leser können es selbst ausprobieren. Ich hoffe, dieser Artikel ist für Sie hilfreich.</p><h2 id=referenzen>Referenzen</h2><blockquote><ol><li><a href=https://github.com/fatedier/frp>GitHub - fatedier/frp</a></li><li><a href=https://teahour.fm/95>Teahour #95 - Wie ist es, auf einem Chromebook zu entwickeln?</a></li></ol></blockquote></articl><h2>Verwandte Beiträge</h2><dl class=row></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-07-10</dt><dd class=col-md-9><a href=/de/2022/07/10/my_config_and_beautify_solution_of_macos_terminal/>Warp, iTerm2 oder Alacritty? Meine Terminal-Tüftler-Reise</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-05-08</dt><dd class=col-md-9><a href=/de/2022/05/08/personal_tools_in_2022_may/>Persönliches Toolkit (Mai 2022)</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://www.pseudoyu.com><img src=/images/author.webp alt=pseudoyu></a></div><div class=author-content><p class=author-title>Autor</p><p class=author-name>pseudoyu</p><p class=author-desc>Backend- & Smart-Contract-Entwickler, MSc-Absolvent in ECIC (Electronic Commerce and Internet Computing) an der Universität Hongkong (HKU). Lerne und entwickle gerne Neues. <a href=https://github.com/pseudoyu>Folge mir auf GitHub</a></p></div></div></div><div align=center><div class=comment-underline></div></div><br><div class=comments><div class=title><span>Comments</span>
<span class=counter><span class=remark42__counter data-url=https://www.pseudoyu.com/de/2022/07/05/access_your_local_devices_using_reverse_proxy_tool_frp/></span></span></div><div id=remark42></div></div><script>var remark_config={host:"https://comments.pseudoyu.com",site_id:"pseudoyu.com",components:["embed","counter"],max_shown_comments:20,simple_view:!0,theme:"light"}</script><script>(function(){const t=window.REMARK42;if(t)t.destroy(),t.createInstance(remark_config);else for(const t of remark_config.components){var n=document,e=n.createElement("script");e.src=`${remark_config.host}/web/${t}.mjs`,e.type="module",e.defer=!0,e.setAttribute("data-no-instant",""),n.head.appendChild(e)}})()</script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Sitemap</div><ul class=list-unstyled><li><a href=https://www.pseudoyu.com/de/tags/>Schlagworte</a></li><li><a href=https://www.pseudoyu.com/de/categories/>Kategorien</a></li><li><a rel=alternate type=application/rss+xml href=https://www.pseudoyu.com/de/index.xml><i class="fas fa-rss-square"></i> RSS-Feed</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Social</div><ul class=list-unstyled><li><a href=https://t.me/pseudoyulife rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/pseudo_yu rel=noopener target=_blank>Twitter</a></li><li><a href=https://www.instagram.com/pseudo.yu/ rel=noopener target=_blank>Instagram</a></li><li><a href=https://space.bilibili.com/5374948/ rel=noopener target=_blank>BiliBili</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Links</div><ul class=list-unstyled><li><a href=https://github.com/pseudoyu rel=noopener target=_blank>Yu's GitHub</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em><a href="https://stats.pseudoyu.com?access-token=2m1u5i2k413q0733h2a3332w3m1t6r634g1m6n" rel=noopener target=_blank>Yu's blog analytics</a></em></small><br><small><em>Powered by <a href=https://gohugo.io rel=noopener target=_blank>Hugo</a> - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>den</a></em></small><br><small><em><a href=https://www.hku.hk rel=noopener target=_blank>The University of Hong Kong</a> - <a href=https://www.cs.hku.hk rel=noopener target=_blank>CS</a></em></small><br><small>&copy;
Yu Zhang
2020 -
2024</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=scroll-top class=scroll-top accesskey=g><span class=arrow-icon></span></a>
<script>var mybutton=document.getElementById("scroll-top");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script></body></html>