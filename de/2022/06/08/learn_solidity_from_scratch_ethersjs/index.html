<!doctype html><html lang=de itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.105.0"><meta charset=utf-8><title>Solidity Smart Contract Entwicklung - Beherrschung von ethers.js · Pseudoyu</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script data-goatcounter=https://stats.pseudoyu.com/count async src=//stats.pseudoyu.com/count.js></script><meta name=description content="《後來的我們 - 五月天》 Vorwort Im vorherigen Artikel &amp;ldquo;Solidity Smart Contract Entwicklung - Grundlagen&amp;rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie Brownie und HardHat debuggen können. In einem weiteren Artikel &amp;ldquo;Solidity Smart Contract Entwicklung - Beherrschung von Web3.py&amp;rdquo; haben wir auch direkt mit unserem lokalen Ganache-Node mittels Web3.py interagiert."><meta name=keywords content="hugo,blockchain,programming"><link rel=canonical href=https://www.pseudoyu.com/de/2022/06/08/learn_solidity_from_scratch_ethersjs/><link rel=alternate href=https://www.pseudoyu.com/zh/2022/06/08/learn_solidity_from_scratch_ethersjs/ hreflang=zh><link rel=alternate href=https://www.pseudoyu.com/en/2022/06/08/learn_solidity_from_scratch_ethersjs/ hreflang=en><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href=https://www.pseudoyu.com/css/den.css><link rel=stylesheet href=https://www.pseudoyu.com/css/custom.css><meta property="og:title" content="Solidity Smart Contract Entwicklung - Beherrschung von ethers.js"><meta property="og:description" content="《後來的我們 - 五月天》 Vorwort Im vorherigen Artikel &ldquo;Solidity Smart Contract Entwicklung - Grundlagen&rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie Brownie und HardHat debuggen können. In einem weiteren Artikel &ldquo;Solidity Smart Contract Entwicklung - Beherrschung von Web3.py&rdquo; haben wir auch direkt mit unserem lokalen Ganache-Node mittels Web3.py interagiert."><meta property="og:type" content="article"><meta property="og:url" content="https://www.pseudoyu.com/de/2022/06/08/learn_solidity_from_scratch_ethersjs/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-08T00:25:45+08:00"><meta property="article:modified_time" content="2022-06-08T00:25:45+08:00"><meta itemprop=name content="Solidity Smart Contract Entwicklung - Beherrschung von ethers.js"><meta itemprop=description content="《後來的我們 - 五月天》 Vorwort Im vorherigen Artikel &ldquo;Solidity Smart Contract Entwicklung - Grundlagen&rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie Brownie und HardHat debuggen können. In einem weiteren Artikel &ldquo;Solidity Smart Contract Entwicklung - Beherrschung von Web3.py&rdquo; haben wir auch direkt mit unserem lokalen Ganache-Node mittels Web3.py interagiert."><meta itemprop=datePublished content="2022-06-08T00:25:45+08:00"><meta itemprop=dateModified content="2022-06-08T00:25:45+08:00"><meta itemprop=wordCount content="1409"><meta itemprop=keywords content="blockchain,solidity,ethereum,web3,smart contract,javascript,ethers.js,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Solidity Smart Contract Entwicklung - Beherrschung von ethers.js"><meta name=twitter:description content="《後來的我們 - 五月天》 Vorwort Im vorherigen Artikel &ldquo;Solidity Smart Contract Entwicklung - Grundlagen&rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie Brownie und HardHat debuggen können. In einem weiteren Artikel &ldquo;Solidity Smart Contract Entwicklung - Beherrschung von Web3.py&rdquo; haben wir auch direkt mit unserem lokalen Ganache-Node mittels Web3.py interagiert."></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://www.pseudoyu.com/images/background.png);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://www.pseudoyu.com/de/><img class="mr20 header-logo-image" src=https://www.pseudoyu.com/images/icon.png alt=logo>
Pseudoyu</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/ideas/>Ideen</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/tools/>Tools</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/develop/>Code</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/links/>Links</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/search/>Suche</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/about/>Über</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/zh/><i class="fas fa-globe"></i> 简</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/><i class="fas fa-globe"></i> EN</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>Solidity Smart Contract Entwicklung - Beherrschung von ethers.js</h1><p class=header-date>Autor:
pseudoyu
| <span>1409 Wörter, 3 Minuten</span>
| <span class=remark42__counter data-url=https://www.pseudoyu.com/de/2022/06/08/learn_solidity_from_scratch_ethersjs/></span> Kommentare
| 2022-06-08
| Kategorie:
<a href=https://www.pseudoyu.com/de/category/develop/>Develop</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://www.pseudoyu.com/de/tag/blockchain/>blockchain</a>,
<a href=https://www.pseudoyu.com/de/tag/ethereum/>ethereum</a>,
<a href=https://www.pseudoyu.com/de/tag/ethers.js/>ethers.js</a>,
<a href=https://www.pseudoyu.com/de/tag/javascript/>javascript</a>,
<a href=https://www.pseudoyu.com/de/tag/smart-contract/>smart contract</a>,
<a href=https://www.pseudoyu.com/de/tag/solidity/>solidity</a>,
<a href=https://www.pseudoyu.com/de/tag/web3/>web3</a></p><div class=clearfix></div><p class="float-right translations"><i class="fas fa-language" aria-hidden=true></i>
Übersetzungen:
<a href=https://www.pseudoyu.com/zh/2022/06/08/learn_solidity_from_scratch_ethersjs/>ZH</a>, <a href=https://www.pseudoyu.com/en/2022/06/08/learn_solidity_from_scratch_ethersjs/>EN</a></p></div></div></div></div></div><main><div class="container content"><articl data-pagefind-body><figure><audio controls preload=metadata><source src=/audios/here_after_us.mp3 type=audio/mpeg></audio><i><figcaption>《後來的我們 - 五月天》</figcaption></i></figure><h2 id=vorwort>Vorwort</h2><p>Im vorherigen Artikel &ldquo;<a href=https://www.pseudoyu.com/de/2022/05/25/learn_solidity_from_scratch_basic/>Solidity Smart Contract Entwicklung - Grundlagen</a>&rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie <a href=https://github.com/eth-brownie/brownie>Brownie</a> und <a href=https://github.com/NomicFoundation/hardhat>HardHat</a> debuggen können. In einem weiteren Artikel &ldquo;<a href=https://www.pseudoyu.com/de/2022/05/30/learn_solidity_from_scratch_web3py/>Solidity Smart Contract Entwicklung - Beherrschung von Web3.py</a>&rdquo; haben wir auch direkt mit unserem lokalen Ganache-Node mittels Web3.py interagiert.</p><p>Ursprünglich hatte ich geplant, aufgrund meiner größeren Vertrautheit mit Python, das Brownie-Framework für die weitere Entwicklung zu verwenden. Nach einiger Recherche stellte ich jedoch fest, dass in der Branche überwiegend das HardHat-Framework verwendet wird, das auch mehr Erweiterungen bietet. Zudem wurde das Solidity-Tutorial, dem ich folge, auf eine <a href="https://www.youtube.com/watch?v=gyMwXuJrbJQ">Javascript-Version</a> aktualisiert, weshalb ich beschloss, es zu erlernen.</p><p>Um die Prinzipien besser zu verstehen und eine gute Grundlage für unsere spätere Verwendung des Frameworks zu schaffen, werden wir diesmal <a href=https://github.com/ethers-io/ethers.js/>ethers.js</a> verwenden, um mit unserem auf der <a href=https://dashboard.alchemyapi.io>Alchemy</a>-Plattform bereitgestellten Rinkeby-Testnetzwerk zu interagieren. Wir werden die grundlegende Vertragskompilierung, die Bereitstellung im Rinkeby-Netzwerk und die Interaktion mit dem Vertrag implementieren.</p><p>Sie können <a href=https://github.com/pseudoyu/learn-solidity/tree/master/ethers_simple_storage>hier</a> auf das Code-Repository für dieses Test-Demo zugreifen.</p><h2 id=ethersjs>ethers.js</h2><p>ethers.js ist eine Open-Source-Bibliothek für Javascript, die mit dem Ethereum-Netzwerk interagieren kann. Ihre GitHub-Adresse lautet <a href=https://github.com/ethers-io/ethers.js/>ethers.io/ethers.js</a>, und Sie können ihre <a href=https://docs.ethers.io/>offizielle Dokumentation</a> für die Verwendung besuchen.</p><h3 id=installation>Installation</h3><p>Wir können <code>ethers.js</code> mit yarn wie folgt installieren:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yarn add ethers
</span></span></code></pre></div><p><img src=https://image.pseudoyu.com/images/yarn_add_ethers.png alt=yarn_add_ethers></p><h3 id=verwendung>Verwendung</h3><p>Importieren Sie die Bibliothek mit <code>require</code>, um sie zu verwenden</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ethers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ethers&#39;</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=kompilierung-des-solidity-vertrags>Kompilierung des Solidity-Vertrags</h2><h3 id=quellcode-des-vertrags>Quellcode des Vertrags</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-solidity data-lang=solidity><span class=line><span class=cl><span class=c1>// SPDX-License-Identifier: MIT
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>pragma solidity</span> <span class=o>^</span><span class=mi>0</span><span class=p>.</span><span class=mi>8</span><span class=p>.</span><span class=mi>7</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>contract</span> <span class=nc>SimpleStorage</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>uint256</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>favoriteBool</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>struct</span> <span class=nc>People</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>uint256</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=nb>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>People</span> <span class=k>public</span> <span class=n>person</span> <span class=o>=</span> <span class=n>People</span><span class=p>({</span><span class=n>favoriteNumber</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nb>name</span><span class=o>:</span> <span class=s>&#34;Arthur&#34;</span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>People</span><span class=p>[]</span> <span class=k>public</span> <span class=n>people</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>mapping</span><span class=p>(</span><span class=kt>string</span> <span class=o>=&gt;</span> <span class=kt>uint256</span><span class=p>)</span> <span class=k>public</span> <span class=n>nameToFavoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>store</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>_favoriteNumber</span><span class=p>)</span> <span class=k>public</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>favoriteNumber</span> <span class=o>=</span> <span class=n>_favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>retrieve</span><span class=p>()</span> <span class=k>public</span> <span class=k>view</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>addPerson</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>_name</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>_favoriteNumber</span><span class=p>)</span> <span class=k>public</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>people</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>People</span><span class=p>({</span><span class=n>favoriteNumber</span><span class=o>:</span> <span class=n>_favoriteNumber</span><span class=p>,</span> <span class=nb>name</span><span class=o>:</span> <span class=n>_name</span><span class=p>}));</span>
</span></span><span class=line><span class=cl>        <span class=n>nameToFavoriteNumber</span><span class=p>[</span><span class=n>_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>_favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Dies ist ein einfacher Speichervertrag, der ein People-Strukturobjekt verwendet, um den Namen einer Person und ihre Lieblingszahl zu speichern, ein Array verwendet, um Informationen für mehrere Personen zu speichern, und Methoden zum Hinzufügen und Suchen bereitstellt.</p><h3 id=lesen-der-vertragssquelldatei>Lesen der Vertragssquelldatei</h3><p>Nachdem wir das Schreiben und die Syntaxprüfung des Solidity-Vertrags durch VSCode oder andere Editoren abgeschlossen haben, müssen wir den Vertrag in eine ABI-Datei und Bytecode kompilieren.</p><p>Wir können das <code>solc</code>-Kommandozeilentool über <code>yarn</code> für die Bearbeitung installieren, und wir können die entsprechende Version wählen. Der Befehl lautet wie folgt:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yarn add solc@0.8.7-fixed
</span></span></code></pre></div><p>Nach der Installation können wir den <code>solcjs</code>-Befehl zur Kompilierung verwenden. Der Befehl lautet wie folgt:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yarn solcjs --bin --abi --include-path node_modules/ --base-path . -o . SimpleStorage.sol
</span></span></code></pre></div><p>Da das Kompilieren von Verträgen eine häufige Operation ist, können wir den <code>compile</code>-Skriptbefehl in <code>package.json</code> wie folgt konfigurieren:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;scripts&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;compile&#34;</span><span class=p>:</span> <span class=s2>&#34;yarn solcjs --bin --abi --include-path node_modules/ --base-path . -o . SimpleStorage.sol&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Danach müssen Sie nur noch <code>yarn compile</code> ausführen, um die Vertragskompilierungsdateien zu generieren.</p><h3 id=erhalt-der-kompilierungsergebnisse>Erhalt der Kompilierungsergebnisse</h3><p>Nach der Kompilierung werden ABI- und Bytecode-Dateien generiert, mit <code>.bin</code> bzw. <code>.abi</code> als Suffixe.</p><h4 id=erhalt-von-bytecode-und-abi>Erhalt von Bytecode und ABI</h4><p>Die Bereitstellung und Interaktion von Solidity-Verträgen erfordern zwei Teile: Bytecode und ABI. Wir können sie durch den folgenden Code in entsprechende Variablen für nachfolgende Operationen schreiben.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fs-extra&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>abi</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s2>&#34;./SimpleStorage_sol_SimpleStorage.abi&#34;</span><span class=p>,</span> <span class=s2>&#34;utf-8&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>binary</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s2>&#34;./SimpleStorage_sol_SimpleStorage.bin&#34;</span><span class=p>,</span> <span class=s2>&#34;utf-8&#34;</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=erstellung-einer-rinkeby-testnetzwerkumgebung-alchemy>Erstellung einer Rinkeby-Testnetzwerkumgebung (Alchemy)</h2><p>Das Debuggen von Smart Contracts erfordert die Bereitstellung des Vertrags in einer tatsächlichen Kette. Wir wählen die Bereitstellung im Rinkeby-Testnetzwerk auf der Alchemy-Plattform für nachfolgendes Debugging und Entwicklung.</p><h3 id=alchemy-plattform>Alchemy-Plattform</h3><p>Zunächst besuchen wir die <a href=https://dashboard.alchemyapi.io>offizielle Alchemy-Website</a>, registrieren uns und melden uns an, und wir sehen ihr Dashboard, das alle erstellten Anwendungen anzeigt.</p><p><img src=https://image.pseudoyu.com/images/alchemy_dashboard.png alt=alchemy_dashboard></p><p>Nach der Installation wählen Sie Create App, um schnell einen Rinkeby-Testnetzwerk-Node zu erstellen.</p><p><img src=https://image.pseudoyu.com/images/alchemy_create_app.png alt=alchemy_create_app></p><p>Nach der Erstellung klicken Sie auf View Details, um die detaillierten Informationen der App zu sehen, die wir gerade erstellt haben. Klicken Sie oben rechts auf View Key, um unsere Node-Informationen abzufragen. Wir müssen die HTTP-URL für die spätere Verbindung notieren.</p><p><img src=https://image.pseudoyu.com/images/alchemy_app_detail.png alt=alchemy_app_detail></p><h2 id=erstellung-eines-rinkeby-testkontos-metamask>Erstellung eines Rinkeby-Testkontos (MetaMask)</h2><h3 id=metamask>MetaMask</h3><p>Nachdem wir die Rinkeby-Testnetzwerkumgebung erstellt haben, müssen wir ein Konto über MetaMask erstellen, einige Test-Token erhalten und den privaten Schlüssel des Kontos für die spätere Verwendung notieren.</p><p><img src=https://image.pseudoyu.com/images/metamask_private_key.png alt=metamask_private_key></p><h3 id=erhalt-von-test-token>Erhalt von Test-Token</h3><p>Nach der Erstellung eines Kontos benötigen wir einige Test-Token für die nachfolgende Entwicklung und das Debugging. Wir können sie über die folgenden URLs erhalten:</p><ul><li><a href=https://faucets.chain.link>https://faucets.chain.link</a></li><li><a href=https://rinkebyfaucet.com/>https://rinkebyfaucet.com/</a></li></ul><h2 id=verbindung-zum-test-node-und-wallet>Verbindung zum Test-Node und Wallet</h2><h3 id=verbindung-zum-node>Verbindung zum Node</h3><p><code>ethers.js</code> bietet eine Bibliothek, die sich leicht mit unserem Test-Node verbinden lässt, wobei <code>process.env.ALCHEMY_RPC_URL</code> die HTTP-URL der App ist, die wir auf der Alchemy-Plattform erstellt haben:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ethers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ethers&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>provider</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ethers</span><span class=p>.</span><span class=nx>providers</span><span class=p>.</span><span class=nx>JsonRpcProvider</span><span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>ALCHEMY_RPC_URL</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=verbindung-zur-wallet>Verbindung zur Wallet</h3><p><code>ethers.js</code> bietet auch eine Methode, um sich mit unserer Test-Wallet zu verbinden, wobei <code>process.env.RINKEBY_PRIVATE_KEY</code> der private Schlüssel ist, den wir aus MetaMask kopiert haben.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ethers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ethers&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>wallet</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ethers</span><span class=p>.</span><span class=nx>Wallet</span><span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>RINKEBY_PRIVATE_KEY</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>provider</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h2 id=bereitstellung-des-solidity-vertrags>Bereitstellung des Solidity-Vertrags</h2><h3 id=erstellung-des-vertrags>Erstellung des Vertrags</h3><p>Wir können einen Vertrag über die <code>ethers.js</code>-Bibliothek erstellen.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>contractFactory</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ethers</span><span class=p>.</span><span class=nx>ContractFactory</span><span class=p>(</span><span class=nx>abi</span><span class=p>,</span> <span class=nx>binary</span><span class=p>,</span> <span class=nx>wallet</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=bereitstellung-des-vertrags>Bereitstellung des Vertrags</h3><p>Nachfolgend werden wir erläutern, wie man einen Vertrag über die <code>ethers.js</code>-Bibliothek bereitstellt, wobei die ABI- und BIN-Dateien des <code>SimpleStorage</code>-Vertrags bereits im obigen Code eingelesen wurden.</p><h4 id=erstellung-des-vertrags-1>Erstellung des Vertrags</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>contractFactory</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ethers</span><span class=p>.</span><span class=nx>ContractFactory</span><span class=p>(</span><span class=nx>abi</span><span class=p>,</span> <span class=nx>binary</span><span class=p>,</span> <span class=nx>wallet</span><span class=p>);</span>
</span></span></code></pre></div><h4 id=bereitstellung-des-vertrags-1>Bereitstellung des Vertrags</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>contract</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>contractFactory</span><span class=p>.</span><span class=nx>deploy</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>await</span> <span class=nx>contract</span><span class=p>.</span><span class=nx>deployTransaction</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=interaktion-mit-dem-vertrag>Interaktion mit dem Vertrag</h3><p>Wir können auch mit dem Vertrag über <code>ethers.js</code> interagieren.</p><h4 id=retrieve>retrieve()</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>currentFavoriteNumber</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>contract</span><span class=p>.</span><span class=nx>retrieve</span><span class=p>();</span>
</span></span></code></pre></div><h4 id=store>store()</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>transactionResponse</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>contract</span><span class=p>.</span><span class=nx>store</span><span class=p>(</span><span class=s2>&#34;7&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>transactionReceipt</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>transactionResponse</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=konstruktion-einer-transaktion-aus-rohdaten>Konstruktion einer Transaktion aus Rohdaten</h3><p>Zusätzlich zum direkten Aufruf von Methoden zur Bereitstellung von Verträgen können wir auch selbst Transaktionen konstruieren.</p><h4 id=konstruktion-der-transaktion>Konstruktion der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>nonce</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>wallet</span><span class=p>.</span><span class=nx>getTransactionCount</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>tx</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>nonce</span><span class=o>:</span> <span class=nx>nonce</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>gasPrice</span><span class=o>:</span> <span class=mi>20000000000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>gasLimit</span><span class=o>:</span> <span class=mi>1000000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>to</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>value</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>data</span><span class=o>:</span> <span class=s2>&#34;0x&#34;</span> <span class=o>+</span> <span class=nx>binary</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>chainId</span><span class=o>:</span> <span class=mi>1337</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><h4 id=signierung-der-transaktion>Signierung der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>signedTx</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>wallet</span><span class=p>.</span><span class=nx>signTransaction</span><span class=p>(</span><span class=nx>tx</span><span class=p>);</span>
</span></span></code></pre></div><h4 id=senden-der-transaktion>Senden der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>sentTxResponse</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>wallet</span><span class=p>.</span><span class=nx>sendTransaction</span><span class=p>(</span><span class=nx>tx</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>await</span> <span class=nx>sentTxResponse</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=fazit>Fazit</h2><p>Dies sind die Schritte zur Interaktion mit dem Rinkeby-Testnetzwerk von Alchemy über die <code>ethers.js</code>-Bibliothek. In der tatsächlichen Projektentwicklung verwenden wir im Allgemeinen nicht direkt Bibliotheken wie <code>ethers.js</code>, sondern weiter gekapselte Frameworks wie Brownie und HardHat. Das Verständnis der Verwendung von Bibliotheken wie <code>Web3.py</code> oder <code>ethers.js</code> ist jedoch ebenfalls sehr wichtig. Ich werde in Zukunft die Verwendung des HardHat-Frameworks weiter erläutern.</p><h2 id=referenzen>Referenzen</h2><blockquote><ol><li><a href=https://www.pseudoyu.com/de/2022/05/25/learn_solidity_from_scratch_basic/>Solidity Smart Contract Entwicklung - Grundlagen</a></li><li><a href=https://www.pseudoyu.com/de/2022/05/30/learn_solidity_from_scratch_web3py/>Solidity Smart Contract Entwicklung - Beherrschung von Web3.py</a></li><li><a href="https://www.youtube.com/watch?v=gyMwXuJrbJQ">Solidity, Blockchain und Smart Contract - Javascript-Version</a></li><li><a href=https://github.com/ethers-io/ethers.js/>ethers.js Projektrepository</a></li><li><a href=https://docs.ethers.io/>ethers.js Offizielle Dokumentation</a></li><li><a href=https://dashboard.alchemyapi.io>Alchemy Offizielle Website</a></li></ol></blockquote></articl><h2>Verwandte Beiträge</h2><dl class=row></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2023-09-13</dt><dd class=col-md-9><a href=/de/2023/09/13/weekly_review_20230913/>Wochenrückblick #46 - Abschied von langen Haaren, ursprüngliche Intention des Wochenrückblicks und Vertragsentwicklung</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2023-04-30</dt><dd class=col-md-9><a href=/de/2023/04/30/weekly_review_20230430/>Wochenrückblick #38 - Foundry Contract-Tests, Logseq Aufgabenverwaltung und Surge Ponte Remote-Entwicklung</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-07-01</dt><dd class=col-md-9><a href=/de/2022/07/01/two_phase_commit_contract_practice_in_solidity/>Implementierung von Two-Phase Commit in Solidity Smart Contracts unter Verwendung von State Locks</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-06-09</dt><dd class=col-md-9><a href=/de/2022/06/09/learn_solidity_from_scratch_hardhat/>Solidity Smart Contract Entwicklung - Verwendung des Hardhat Frameworks</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-05-30</dt><dd class=col-md-9><a href=/de/2022/05/30/learn_solidity_from_scratch_web3py/>Solidity Smart Contract Entwicklung - Meistern von Web3.py</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://www.pseudoyu.com><img src=/images/author.webp alt=pseudoyu></a></div><div class=author-content><p class=author-title>Autor</p><p class=author-name>pseudoyu</p><p class=author-desc>Backend- & Smart-Contract-Entwickler, MSc-Absolvent in ECIC (Electronic Commerce and Internet Computing) an der Universität Hongkong (HKU). Lerne und entwickle gerne Neues. <a href=https://github.com/pseudoyu>Folge mir auf GitHub</a></p></div></div></div><div align=center><div class=comment-underline></div></div><br><div class=comments><div class=title><span>Comments</span>
<span class=counter><span class=remark42__counter data-url=https://www.pseudoyu.com/de/2022/06/08/learn_solidity_from_scratch_ethersjs/></span></span></div><div id=remark42></div></div><script>var remark_config={host:"https://comments.pseudoyu.com",site_id:"pseudoyu.com",components:["embed","counter"],max_shown_comments:20,simple_view:!0,theme:"light"}</script><script>(function(){const t=window.REMARK42;if(t)t.destroy(),t.createInstance(remark_config);else for(const t of remark_config.components){var n=document,e=n.createElement("script");e.src=`${remark_config.host}/web/${t}.mjs`,e.type="module",e.defer=!0,e.setAttribute("data-no-instant",""),n.head.appendChild(e)}})()</script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Sitemap</div><ul class=list-unstyled><li><a href=https://www.pseudoyu.com/de/tags/>Schlagworte</a></li><li><a href=https://www.pseudoyu.com/de/categories/>Kategorien</a></li><li><a rel=alternate type=application/rss+xml href=https://www.pseudoyu.com/de/index.xml><i class="fas fa-rss-square"></i> RSS-Feed</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Social</div><ul class=list-unstyled><li><a href=https://t.me/pseudoyulife rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/pseudo_yu rel=noopener target=_blank>Twitter</a></li><li><a href=https://www.instagram.com/pseudo.yu/ rel=noopener target=_blank>Instagram</a></li><li><a href=https://space.bilibili.com/5374948/ rel=noopener target=_blank>BiliBili</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Links</div><ul class=list-unstyled><li><a href=https://github.com/pseudoyu rel=noopener target=_blank>Yu's GitHub</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em><a href="https://stats.pseudoyu.com?access-token=2m1u5i2k413q0733h2a3332w3m1t6r634g1m6n" rel=noopener target=_blank>Yu's blog analytics</a></em></small><br><small><em>Powered by <a href=https://gohugo.io rel=noopener target=_blank>Hugo</a> - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>den</a></em></small><br><small><em><a href=https://www.hku.hk rel=noopener target=_blank>The University of Hong Kong</a> - <a href=https://www.cs.hku.hk rel=noopener target=_blank>CS</a></em></small><br><small>&copy;
Yu Zhang
2020 -
2024</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=scroll-top class=scroll-top accesskey=g><span class=arrow-icon></span></a>
<script>var mybutton=document.getElementById("scroll-top");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script></body></html>