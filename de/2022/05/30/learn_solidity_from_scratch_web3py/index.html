<!doctype html><html lang=de itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.105.0"><meta charset=utf-8><title>Solidity Smart Contract Entwicklung - Meistern von Web3.py · Pseudoyu</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script data-goatcounter=https://stats.pseudoyu.com/count async src=//stats.pseudoyu.com/count.js></script><meta name=description content="《后来的我们 - 五月天》 Vorwort Im vorherigen Artikel &amp;ldquo;Solidity Smart Contract Entwicklung - Grundlagen&amp;rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie Brownie und HardHat debuggen können. Bevor wir jedoch diese vorgefertigten Frameworks verwenden, können wir mit Web3.py direkt mit unserem lokalen Ganache-Node interagieren, um"><meta name=keywords content="hugo,blockchain,programming"><link rel=canonical href=https://www.pseudoyu.com/de/2022/05/30/learn_solidity_from_scratch_web3py/><link rel=alternate href=https://www.pseudoyu.com/zh/2022/05/30/learn_solidity_from_scratch_web3py/ hreflang=zh><link rel=alternate href=https://www.pseudoyu.com/en/2022/05/30/learn_solidity_from_scratch_web3py/ hreflang=en><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href=https://www.pseudoyu.com/css/den.css><link rel=stylesheet href=https://www.pseudoyu.com/css/custom.css><meta property="og:title" content="Solidity Smart Contract Entwicklung - Meistern von Web3.py"><meta property="og:description" content="《后来的我们 - 五月天》 Vorwort Im vorherigen Artikel &ldquo;Solidity Smart Contract Entwicklung - Grundlagen&rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie Brownie und HardHat debuggen können. Bevor wir jedoch diese vorgefertigten Frameworks verwenden, können wir mit Web3.py direkt mit unserem lokalen Ganache-Node interagieren, um"><meta property="og:type" content="article"><meta property="og:url" content="https://www.pseudoyu.com/de/2022/05/30/learn_solidity_from_scratch_web3py/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-30T15:25:45+08:00"><meta property="article:modified_time" content="2022-05-30T15:25:45+08:00"><meta itemprop=name content="Solidity Smart Contract Entwicklung - Meistern von Web3.py"><meta itemprop=description content="《后来的我们 - 五月天》 Vorwort Im vorherigen Artikel &ldquo;Solidity Smart Contract Entwicklung - Grundlagen&rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie Brownie und HardHat debuggen können. Bevor wir jedoch diese vorgefertigten Frameworks verwenden, können wir mit Web3.py direkt mit unserem lokalen Ganache-Node interagieren, um"><meta itemprop=datePublished content="2022-05-30T15:25:45+08:00"><meta itemprop=dateModified content="2022-05-30T15:25:45+08:00"><meta itemprop=wordCount content="1243"><meta itemprop=keywords content="blockchain,solidity,ethereum,web3,smart contract,python,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Solidity Smart Contract Entwicklung - Meistern von Web3.py"><meta name=twitter:description content="《后来的我们 - 五月天》 Vorwort Im vorherigen Artikel &ldquo;Solidity Smart Contract Entwicklung - Grundlagen&rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie Brownie und HardHat debuggen können. Bevor wir jedoch diese vorgefertigten Frameworks verwenden, können wir mit Web3.py direkt mit unserem lokalen Ganache-Node interagieren, um"></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://www.pseudoyu.com/images/background.png);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://www.pseudoyu.com/de/><img class="mr20 header-logo-image" src=https://www.pseudoyu.com/images/icon.png alt=logo>
Pseudoyu</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/ideas/>Ideen</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/tools/>Tools</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/develop/>Code</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/links/>Links</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/search/>Suche</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/about/>Über</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/zh/><i class="fas fa-globe"></i> 简</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/><i class="fas fa-globe"></i> EN</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>Solidity Smart Contract Entwicklung - Meistern von Web3.py</h1><p class=header-date>Autor:
pseudoyu
| <span>1243 Wörter, 3 Minuten</span>
| <span class=remark42__counter data-url=https://www.pseudoyu.com/de/2022/05/30/learn_solidity_from_scratch_web3py/></span> Kommentare
| 2022-05-30
| Kategorie:
<a href=https://www.pseudoyu.com/de/category/develop/>Develop</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://www.pseudoyu.com/de/tag/blockchain/>blockchain</a>,
<a href=https://www.pseudoyu.com/de/tag/ethereum/>ethereum</a>,
<a href=https://www.pseudoyu.com/de/tag/python/>python</a>,
<a href=https://www.pseudoyu.com/de/tag/smart-contract/>smart contract</a>,
<a href=https://www.pseudoyu.com/de/tag/solidity/>solidity</a>,
<a href=https://www.pseudoyu.com/de/tag/web3/>web3</a></p><div class=clearfix></div><p class="float-right translations"><i class="fas fa-language" aria-hidden=true></i>
Übersetzungen:
<a href=https://www.pseudoyu.com/zh/2022/05/30/learn_solidity_from_scratch_web3py/>ZH</a>, <a href=https://www.pseudoyu.com/en/2022/05/30/learn_solidity_from_scratch_web3py/>EN</a></p></div></div></div></div></div><main><div class="container content"><articl data-pagefind-body><figure><audio controls preload=metadata><source src=/audios/here_after_us.mp3 type=audio/mpeg></audio><i><figcaption>《后来的我们 - 五月天》</figcaption></i></figure><h2 id=vorwort>Vorwort</h2><p>Im vorherigen Artikel &ldquo;<a href=https://www.pseudoyu.com/de/2022/05/25/learn_solidity_from_scratch_basic/>Solidity Smart Contract Entwicklung - Grundlagen</a>&rdquo; haben wir die grundlegende Syntax von Solidity kennengelernt und verstanden, dass wir mit Frameworks wie <a href=https://github.com/eth-brownie/brownie>Brownie</a> und <a href=https://github.com/NomicFoundation/hardhat>HardHat</a> debuggen können. Bevor wir jedoch diese vorgefertigten Frameworks verwenden, können wir mit Web3.py direkt mit unserem lokalen Ganache-Node interagieren, um die Prinzipien besser zu verstehen und eine solide Grundlage für unsere spätere Verwendung von Frameworks zu schaffen.</p><p>In diesem Artikel wird Web3.py als Beispiel verwendet, um die grundlegende Vertragskompilierung, Bereitstellung im lokalen Ganache-Netzwerk und Interaktion mit Verträgen zu implementieren.</p><p>Sie können <a href=https://github.com/pseudoyu/learn-solidity/tree/master/web3_py_simple_storage>hier</a> auf das Code-Repository für dieses Test-Demo zugreifen.</p><h2 id=web3py>Web3.py</h2><p>Web3.py ist eine Open-Source-Bibliothek für Python, die eine einfache API bereitstellt, mit der wir über Python-Programme mit dem Ethereum-Netzwerk interagieren können. Die GitHub-Adresse lautet <a href=https://github.com/ethereum/web3.py>ethereum/web3.py</a>, und Sie können die <a href=https://web3py.readthedocs.io/en/stable/>offizielle Dokumentation</a> für die Verwendung besuchen.</p><h3 id=installation>Installation</h3><p>Wir können Web3.py mit dem Python-Paketmanagement-Tool pip installieren, wie folgt:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip3 install web3
</span></span></code></pre></div><p><img src=https://image.pseudoyu.com/images/pip_install_web3.png alt=pip_install_web3></p><h3 id=verwendung>Verwendung</h3><p>Importieren Sie einfach die erforderlichen Methoden mit <code>import</code>, um sie zu verwenden</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>web3</span> <span class=kn>import</span> <span class=n>Web3</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>w3</span> <span class=o>=</span> <span class=n>Web3</span><span class=p>(</span><span class=n>Web3</span><span class=o>.</span><span class=n>HTTPProvider</span><span class=p>(</span><span class=s2>&#34;HTTP://127.0.0.1:7545&#34;</span><span class=p>))</span>
</span></span></code></pre></div><h2 id=solidity-vertragskompilierung>Solidity-Vertragskompilierung</h2><h3 id=vertragsquellcode>Vertragsquellcode</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-solidity data-lang=solidity><span class=line><span class=cl><span class=c1>// SPDX-License-Identifier: MIT
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>pragma solidity</span> <span class=o>^</span><span class=mi>0</span><span class=p>.</span><span class=mi>6</span><span class=p>.</span><span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>contract</span> <span class=nc>SimpleStorage</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>uint256</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>favoriteBool</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>struct</span> <span class=nc>People</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>uint256</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=nb>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>People</span> <span class=k>public</span> <span class=n>person</span> <span class=o>=</span> <span class=n>People</span><span class=p>({</span><span class=n>favoriteNumber</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nb>name</span><span class=o>:</span> <span class=s>&#34;Arthur&#34;</span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>People</span><span class=p>[]</span> <span class=k>public</span> <span class=n>people</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>mapping</span><span class=p>(</span><span class=kt>string</span> <span class=o>=&gt;</span> <span class=kt>uint256</span><span class=p>)</span> <span class=k>public</span> <span class=n>nameToFavoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>store</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>_favoriteNumber</span><span class=p>)</span> <span class=k>public</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>favoriteNumber</span> <span class=o>=</span> <span class=n>_favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>retrieve</span><span class=p>()</span> <span class=k>public</span> <span class=k>view</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>addPerson</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>_name</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>_favoriteNumber</span><span class=p>)</span> <span class=k>public</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>people</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>People</span><span class=p>({</span><span class=n>favoriteNumber</span><span class=o>:</span> <span class=n>_favoriteNumber</span><span class=p>,</span> <span class=nb>name</span><span class=o>:</span> <span class=n>_name</span><span class=p>}));</span>
</span></span><span class=line><span class=cl>        <span class=n>nameToFavoriteNumber</span><span class=p>[</span><span class=n>_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>_favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Dies ist ein einfacher Speichervertrag, der ein People-Strukturobjekt verwendet, um den Namen einer Person und ihre Lieblingszahl zu speichern, ein Array verwendet, um Informationen für mehrere Personen zu speichern, und Methoden zum Hinzufügen und Suchen bereitstellt.</p><h3 id=lesen-der-vertragsquelldatei>Lesen der Vertragsquelldatei</h3><p>Nachdem wir das Schreiben und die Syntaxprüfung des Solidity-Vertrags mit VSCode oder anderen Editoren abgeschlossen haben, müssen wir die Vertragsquelldatei lesen und in einer Variable für die anschließende Kompilierung speichern.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;./SimpleStorage.sol&#34;</span><span class=p>,</span> <span class=s2>&#34;r&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>simple_storage_file</span> <span class=o>=</span> <span class=n>file</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
</span></span></code></pre></div><p>Der obige Code liest den Inhalt der Datei <code>SimpleStorage.sol</code> in die Variable <code>simple_storage_file</code> ein.</p><h3 id=kompilieren-des-vertrags>Kompilieren des Vertrags</h3><h4 id=installation-von-solcx>Installation von <code>solcx</code></h4><p>Die Vertragskompilierung erfordert die vorherige Installation des <code>solcx</code>-Tools.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip3 install py-solc-x
</span></span></code></pre></div><p><img src=https://image.pseudoyu.com/images/pip_install_solcx.png alt=pip_install_solcx></p><h4 id=importieren-von-solcx>Importieren von <code>solcx</code></h4><p>Verwenden Sie <code>import</code>, um die erforderlichen Methoden zu importieren</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>solcx</span> <span class=kn>import</span> <span class=n>compile_standard</span><span class=p>,</span> <span class=n>install_solc</span>
</span></span></code></pre></div><h4 id=kompilierung>Kompilierung</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>install_solc</span><span class=p>(</span><span class=s2>&#34;0.6.0&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>compiled_sol</span> <span class=o>=</span> <span class=n>compile_standard</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;language&#34;</span><span class=p>:</span> <span class=s2>&#34;Solidity&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;sources&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;SimpleStorage.sol&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;content&#34;</span><span class=p>:</span> <span class=n>simple_storage_file</span><span class=p>}},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;settings&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;outputSelection&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;*&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;*&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;abi&#34;</span><span class=p>,</span> <span class=s2>&#34;metadata&#34;</span><span class=p>,</span> <span class=s2>&#34;evm.bytecode&#34;</span><span class=p>,</span> <span class=s2>&#34;evm.sourceMap&#34;</span><span class=p>]}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=n>solc_version</span><span class=o>=</span><span class=s2>&#34;0.6.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>Im obigen Code haben wir Version 0.6.0 des Solidity-Kompilierungsprogramms installiert, die <code>compile_standard</code>-Methode aus der <code>solcx</code>-Bibliothek verwendet, um die zuvor gelesene Vertragsquelldatei zu kompilieren, und das Kompilierungsergebnis in der Variable <code>compiled_sol</code> gespeichert.</p><h4 id=erhalten-der-kompilierungsergebnisse>Erhalten der Kompilierungsergebnisse</h4><p>Nach erfolgreicher Kompilierung verwenden Sie den folgenden Code, um den kompilierten Vertrag in eine Datei zu schreiben</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&#34;compiled_code.json&#34;</span><span class=p>,</span> <span class=s2>&#34;w&#34;</span><span class=p>)</span> <span class=k>as</span> <span class=n>file</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>json</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>compiled_sol</span><span class=p>,</span> <span class=n>file</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=erhalten-von-bytecode-und-abi>Erhalten von Bytecode und ABI</h4><p>Die Bereitstellung und Interaktion von Solidity-Verträgen erfordern zwei Teile: Bytecode und ABI. Wir können sie mit dem folgenden Code in entsprechende Variablen für nachfolgende Operationen schreiben.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Bytecode abrufen</span>
</span></span><span class=line><span class=cl><span class=n>bytecode</span> <span class=o>=</span> <span class=n>compiled_sol</span><span class=p>[</span><span class=s2>&#34;contracts&#34;</span><span class=p>][</span><span class=s2>&#34;SimpleStorage.sol&#34;</span><span class=p>][</span><span class=s2>&#34;SimpleStorage&#34;</span><span class=p>][</span><span class=s2>&#34;evm&#34;</span><span class=p>][</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;bytecode&#34;</span>
</span></span><span class=line><span class=cl><span class=p>][</span><span class=s2>&#34;object&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ABI abrufen</span>
</span></span><span class=line><span class=cl><span class=n>abi</span> <span class=o>=</span> <span class=n>compiled_sol</span><span class=p>[</span><span class=s2>&#34;contracts&#34;</span><span class=p>][</span><span class=s2>&#34;SimpleStorage.sol&#34;</span><span class=p>][</span><span class=s2>&#34;SimpleStorage&#34;</span><span class=p>][</span><span class=s2>&#34;abi&#34;</span><span class=p>]</span>
</span></span></code></pre></div><h2 id=lokale-ganache-umgebung>Lokale Ganache-Umgebung</h2><p>Das Debuggen von Smart Contracts erfordert die Bereitstellung des Vertrags auf einer tatsächlichen Chain, aber die Bereitstellung im Ethereum-Mainnet oder in Testnets wie Rinkeby/Koven ist für das Debuggen nicht praktisch. Daher benötigen wir eine lokale Blockchain-Umgebung, und Ganache bietet uns eine solche lokale Debugging-Umgebung. Ganache gibt es hauptsächlich in zwei Installationsmethoden: GUI und CLI.</p><h3 id=ganache-gui>Ganache GUI</h3><p>In Ihrer lokalen Umgebung, wie Mac/Windows-Systemen, können wir den Ganache-Client mit einer grafischen Benutzeroberfläche wählen. Die Installation und Verwendung sind sehr bequem. Sie können die entsprechende Version auf der <a href=https://trufflesuite.com/ganache/>offiziellen Ganache-Website</a> auswählen.</p><p><img src=https://image.pseudoyu.com/images/ganache_download.png alt=ganache_download></p><p>Nach der Installation wird durch Auswahl von Quick Start schnell ein lokal laufendes Blockchain-Netzwerk gestartet und zehn Konten mit jeweils 100 ETH initialisiert, die während der Entwicklung und beim Debuggen verwendet werden können.</p><p><img src=https://image.pseudoyu.com/images/ganache_account.png alt=ganache_account></p><h3 id=ganache-cli-installation>Ganache CLI-Installation</h3><p>Wenn Ihr System keine GUI-Installation unterstützt, können wir die CLI-Installation verwenden. Die Installationsmethode ist wie folgt:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install --global yarn
</span></span><span class=line><span class=cl>yarn global add ganache-cli
</span></span></code></pre></div><p><img src=https://image.pseudoyu.com/images/ganache_cli_install.png alt=ganache_cli_install></p><p>Nach Abschluss der Installation können Sie das lokale Testnetzwerk starten. Wie bei Ganache GUI enthält es auch initialisierte Konten und Guthaben.</p><p><img src=https://image.pseudoyu.com/images/ganache_cli_start.png alt=ganache_cli_start></p><h3 id=verbindung-zur-lokalen-ganache-umgebung-über-web3>Verbindung zur lokalen Ganache-Umgebung über web3</h3><p>web3 bietet eine Bibliothek, mit der man sich einfach mit der lokalen Ganache-Umgebung verbinden kann:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>w3</span> <span class=o>=</span> <span class=n>Web3</span><span class=p>(</span><span class=n>Web3</span><span class=o>.</span><span class=n>HTTPProvider</span><span class=p>(</span><span class=s2>&#34;HTTP://127.0.0.1:7545&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=n>chain_id</span> <span class=o>=</span> <span class=mi>5777</span>
</span></span><span class=line><span class=cl><span class=n>my_address</span> <span class=o>=</span> <span class=s2>&#34;0x2F490e1eA91DF6d3cC856e7AC391a20b1eceD6A5&#34;</span>
</span></span><span class=line><span class=cl><span class=n>private_key</span> <span class=o>=</span> <span class=s2>&#34;0fa88bf96b526a955a6126ae4cca0e72c9c82144ae9af37b497eb6afbe8a9711&#34;</span>
</span></span></code></pre></div><h2 id=solidity-vertragsbereitstellung>Solidity-Vertragsbereitstellung</h2><h3 id=erstellen-eines-vertrags>Erstellen eines Vertrags</h3><p>Wir können einen Vertrag mit der web3-Bibliothek erstellen.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>SimpleStorage</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>contract</span><span class=p>(</span><span class=n>abi</span><span class=o>=</span><span class=n>abi</span><span class=p>,</span> <span class=n>bytecode</span><span class=o>=</span><span class=n>bytecode</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=bereitstellen-des-vertrags>Bereitstellen des Vertrags</h3><p>Die Bereitstellung eines Vertrags besteht aus drei Hauptschritten:</p><ol><li>Erstellen der Transaktion</li><li>Signieren der Transaktion</li><li>Senden der Transaktion</li></ol><h4 id=erstellen-der-transaktion>Erstellen der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>nonce</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>getTransactionCount</span><span class=p>(</span><span class=n>my_address</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>transaction</span> <span class=o>=</span> <span class=n>SimpleStorage</span><span class=o>.</span><span class=n>constructor</span><span class=p>()</span><span class=o>.</span><span class=n>buildTransaction</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;chainId&#34;</span><span class=p>:</span> <span class=n>chain_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;gasPrice&#34;</span><span class=p>:</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>gas_price</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;from&#34;</span><span class=p>:</span> <span class=n>my_address</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;nonce&#34;</span><span class=p>:</span> <span class=n>nonce</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><h4 id=signieren-der-transaktion>Signieren der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>signed_txn</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>account</span><span class=o>.</span><span class=n>sign_transaction</span><span class=p>(</span><span class=n>transaction</span><span class=p>,</span> <span class=n>private_key</span><span class=o>=</span><span class=n>private_key</span><span class=p>)</span>
</span></span></code></pre></div><h4 id=senden-der-transaktion>Senden der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>tx_hash</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>send_raw_transaction</span><span class=p>(</span><span class=n>signed_txn</span><span class=o>.</span><span class=n>rawTransaction</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>tx_receipt</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>wait_for_transaction_receipt</span><span class=p>(</span><span class=n>tx_hash</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=interaktion-mit-dem-vertrag>Interaktion mit dem Vertrag</h3><p>Ähnlich wie bei den Schritten zur Bereitstellung eines Vertrags können wir mit der web3-Bibliothek mit dem Vertrag interagieren, was ebenfalls aus drei Schritten besteht: Erstellen der Transaktion, Signieren der Transaktion und Senden der Transaktion.</p><h4 id=erstellen-der-transaktion-1>Erstellen der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>simple_storage</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>contract</span><span class=p>(</span><span class=n>address</span><span class=o>=</span><span class=n>tx_receipt</span><span class=o>.</span><span class=n>contractAddress</span><span class=p>,</span> <span class=n>abi</span><span class=o>=</span><span class=n>abi</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>store_transaction</span> <span class=o>=</span> <span class=n>simple_storage</span><span class=o>.</span><span class=n>functions</span><span class=o>.</span><span class=n>store</span><span class=p>(</span><span class=mi>67</span><span class=p>)</span><span class=o>.</span><span class=n>buildTransaction</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;chainId&#34;</span><span class=p>:</span> <span class=n>chain_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;gasPrice&#34;</span><span class=p>:</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>gas_price</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;from&#34;</span><span class=p>:</span> <span class=n>my_address</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;nonce&#34;</span><span class=p>:</span> <span class=n>nonce</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><h4 id=signieren-der-transaktion-1>Signieren der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>signed_store_txn</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>account</span><span class=o>.</span><span class=n>sign_transaction</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=n>store_transaction</span><span class=p>,</span> <span class=n>private_key</span><span class=o>=</span><span class=n>private_key</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><h4 id=senden-der-transaktion-1>Senden der Transaktion</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>send_store_tx</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>send_raw_transaction</span><span class=p>(</span><span class=n>signed_store_txn</span><span class=o>.</span><span class=n>rawTransaction</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>tx_receipt</span> <span class=o>=</span> <span class=n>w3</span><span class=o>.</span><span class=n>eth</span><span class=o>.</span><span class=n>wait_for_transaction_receipt</span><span class=p>(</span><span class=n>send_store_tx</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=fazit>Fazit</h2><p>Dies sind die Schritte zur Interaktion mit dem lokalen Ganache-Testnetzwerk unter Verwendung der Web3.py-Bibliothek. In der tatsächlichen Produktionsprojektentwicklung verwenden wir in der Regel keine Bibliotheken wie Web3.py direkt, sondern verwenden weiter gekapselte Bibliotheken wie Brownie und HardHat. Das Verständnis der Verwendung von Bibliotheken wie Web3.py oder Web3.js ist jedoch ebenfalls sehr wichtig.</p><h2 id=referenzen>Referenzen</h2><blockquote><ol><li><a href=https://www.pseudoyu.com/de/2022/05/25/learn_solidity_from_scratch_basic/>Solidity Smart Contract Entwicklung - Grundlagen</a></li><li><a href=https://github.com/ethereum/web3.py>ethereum/web3.py</a></li><li><a href=https://github.com/smartcontractkit/full-blockchain-solidity-course-py>Solidity, Blockchain und Smart Contract - Anfänger bis Experte Vollständiger Kurs | Python Edition</a></li></ol></blockquote></articl><h2>Verwandte Beiträge</h2><dl class=row></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2023-09-13</dt><dd class=col-md-9><a href=/de/2023/09/13/weekly_review_20230913/>Wochenrückblick #46 - Abschied von langen Haaren, ursprüngliche Intention des Wochenrückblicks und Vertragsentwicklung</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2023-04-30</dt><dd class=col-md-9><a href=/de/2023/04/30/weekly_review_20230430/>Wochenrückblick #38 - Foundry Contract-Tests, Logseq Aufgabenverwaltung und Surge Ponte Remote-Entwicklung</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-07-01</dt><dd class=col-md-9><a href=/de/2022/07/01/two_phase_commit_contract_practice_in_solidity/>Implementierung von Two-Phase Commit in Solidity Smart Contracts unter Verwendung von State Locks</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-06-09</dt><dd class=col-md-9><a href=/de/2022/06/09/learn_solidity_from_scratch_hardhat/>Solidity Smart Contract Entwicklung - Verwendung des Hardhat Frameworks</a></dd></dl></dl><dt class=col-md-3>2022-06-08</dt><dd class=col-md-9><a href=/de/2022/06/08/learn_solidity_from_scratch_ethersjs/>Solidity Smart Contract Entwicklung - Beherrschung von ethers.js</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://www.pseudoyu.com><img src=/images/author.webp alt=pseudoyu></a></div><div class=author-content><p class=author-title>Autor</p><p class=author-name>pseudoyu</p><p class=author-desc>Backend- & Smart-Contract-Entwickler, MSc-Absolvent in ECIC (Electronic Commerce and Internet Computing) an der Universität Hongkong (HKU). Lerne und entwickle gerne Neues. <a href=https://github.com/pseudoyu>Folge mir auf GitHub</a></p></div></div></div><div align=center><div class=comment-underline></div></div><br><div class=comments><div class=title><span>Comments</span>
<span class=counter><span class=remark42__counter data-url=https://www.pseudoyu.com/de/2022/05/30/learn_solidity_from_scratch_web3py/></span></span></div><div id=remark42></div></div><script>var remark_config={host:"https://comments.pseudoyu.com",site_id:"pseudoyu.com",components:["embed","counter"],max_shown_comments:20,simple_view:!0,theme:"light"}</script><script>(function(){const t=window.REMARK42;if(t)t.destroy(),t.createInstance(remark_config);else for(const t of remark_config.components){var n=document,e=n.createElement("script");e.src=`${remark_config.host}/web/${t}.mjs`,e.type="module",e.defer=!0,e.setAttribute("data-no-instant",""),n.head.appendChild(e)}})()</script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Sitemap</div><ul class=list-unstyled><li><a href=https://www.pseudoyu.com/de/tags/>Schlagworte</a></li><li><a href=https://www.pseudoyu.com/de/categories/>Kategorien</a></li><li><a rel=alternate type=application/rss+xml href=https://www.pseudoyu.com/de/index.xml><i class="fas fa-rss-square"></i> RSS-Feed</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Social</div><ul class=list-unstyled><li><a href=https://t.me/pseudoyulife rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/pseudo_yu rel=noopener target=_blank>Twitter</a></li><li><a href=https://www.instagram.com/pseudo.yu/ rel=noopener target=_blank>Instagram</a></li><li><a href=https://space.bilibili.com/5374948/ rel=noopener target=_blank>BiliBili</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Links</div><ul class=list-unstyled><li><a href=https://github.com/pseudoyu rel=noopener target=_blank>Yu's GitHub</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em><a href="https://stats.pseudoyu.com?access-token=2m1u5i2k413q0733h2a3332w3m1t6r634g1m6n" rel=noopener target=_blank>Yu's blog analytics</a></em></small><br><small><em>Powered by <a href=https://gohugo.io rel=noopener target=_blank>Hugo</a> - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>den</a></em></small><br><small><em><a href=https://www.hku.hk rel=noopener target=_blank>The University of Hong Kong</a> - <a href=https://www.cs.hku.hk rel=noopener target=_blank>CS</a></em></small><br><small>&copy;
Yu Zhang
2020 -
2024</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=scroll-top class=scroll-top accesskey=g><span class=arrow-icon></span></a>
<script>var mybutton=document.getElementById("scroll-top");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script></body></html>