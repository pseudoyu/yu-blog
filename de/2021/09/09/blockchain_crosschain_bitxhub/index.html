<!doctype html><html lang=de itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.105.0"><meta charset=utf-8><title>BitXHub Cross-chain Plugin (Fabric) Quellcode-Analyse · Pseudoyu</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script data-goatcounter=https://stats.pseudoyu.com/count async src=//stats.pseudoyu.com/count.js></script><meta name=description content="Vorwort Ich habe zuvor erwähnt, dass die BitXHub Cross-Chain-Plattform von QulianTech eine relativ umfassende Open-Source-Cross-Chain-Lösung in der Branche ist. Sie optimiert hauptsächlich"><meta name=keywords content="hugo,blockchain,programming"><link rel=canonical href=https://www.pseudoyu.com/de/2021/09/09/blockchain_crosschain_bitxhub/><link rel=alternate href=https://www.pseudoyu.com/zh/2021/09/09/blockchain_crosschain_bitxhub/ hreflang=zh><link rel=alternate href=https://www.pseudoyu.com/en/2021/09/09/blockchain_crosschain_bitxhub/ hreflang=en><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href=https://www.pseudoyu.com/css/den.css><link rel=stylesheet href=https://www.pseudoyu.com/css/custom.css><meta property="og:title" content="BitXHub Cross-chain Plugin (Fabric) Quellcode-Analyse"><meta property="og:description" content="Vorwort Ich habe zuvor erwähnt, dass die BitXHub Cross-Chain-Plattform von QulianTech eine relativ umfassende Open-Source-Cross-Chain-Lösung in der Branche ist. Sie optimiert hauptsächlich"><meta property="og:type" content="article"><meta property="og:url" content="https://www.pseudoyu.com/de/2021/09/09/blockchain_crosschain_bitxhub/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-09T15:14:26+08:00"><meta property="article:modified_time" content="2021-09-09T15:14:26+08:00"><meta itemprop=name content="BitXHub Cross-chain Plugin (Fabric) Quellcode-Analyse"><meta itemprop=description content="Vorwort Ich habe zuvor erwähnt, dass die BitXHub Cross-Chain-Plattform von QulianTech eine relativ umfassende Open-Source-Cross-Chain-Lösung in der Branche ist. Sie optimiert hauptsächlich"><meta itemprop=datePublished content="2021-09-09T15:14:26+08:00"><meta itemprop=dateModified content="2021-09-09T15:14:26+08:00"><meta itemprop=wordCount content="2838"><meta itemprop=keywords content="blockchain,crosschain,bitxhub,hyperledger fabric,go,"><meta name=twitter:card content="summary"><meta name=twitter:title content="BitXHub Cross-chain Plugin (Fabric) Quellcode-Analyse"><meta name=twitter:description content="Vorwort Ich habe zuvor erwähnt, dass die BitXHub Cross-Chain-Plattform von QulianTech eine relativ umfassende Open-Source-Cross-Chain-Lösung in der Branche ist. Sie optimiert hauptsächlich"></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://www.pseudoyu.com/images/background.png);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://www.pseudoyu.com/de/><img class="mr20 header-logo-image" src=https://www.pseudoyu.com/images/icon.png alt=logo>
Pseudoyu</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/ideas/>Ideen</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/tools/>Tools</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/category/develop/>Code</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/links/>Links</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/search/>Suche</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/about/>Über</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/zh/><i class="fas fa-globe"></i> 简</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/><i class="fas fa-globe"></i> EN</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>BitXHub Cross-chain Plugin (Fabric) Quellcode-Analyse</h1><p class=header-date>Autor:
pseudoyu
| <span>2838 Wörter, 6 Minuten</span>
| <span class=remark42__counter data-url=https://www.pseudoyu.com/de/2021/09/09/blockchain_crosschain_bitxhub/></span> Kommentare
| 2021-09-09
| Kategorie:
<a href=https://www.pseudoyu.com/de/category/develop/>Develop</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://www.pseudoyu.com/de/tag/bitxhub/>bitxhub</a>,
<a href=https://www.pseudoyu.com/de/tag/blockchain/>blockchain</a>,
<a href=https://www.pseudoyu.com/de/tag/crosschain/>crosschain</a>,
<a href=https://www.pseudoyu.com/de/tag/go/>go</a>,
<a href=https://www.pseudoyu.com/de/tag/hyperledger-fabric/>hyperledger fabric</a></p><div class=clearfix></div><p class="float-right translations"><i class="fas fa-language" aria-hidden=true></i>
Übersetzungen:
<a href=https://www.pseudoyu.com/zh/2021/09/09/blockchain_crosschain_bitxhub/>ZH</a>, <a href=https://www.pseudoyu.com/en/2021/09/09/blockchain_crosschain_bitxhub/>EN</a></p></div></div></div></div></div><main><div class="container content"><articl data-pagefind-body><h2 id=vorwort>Vorwort</h2><p>Ich habe zuvor erwähnt, dass die BitXHub Cross-Chain-Plattform von QulianTech eine relativ umfassende Open-Source-Cross-Chain-Lösung in der Branche ist. Sie optimiert hauptsächlich die Funktionalität, Sicherheit und Flexibilität des Cross-Chain-Prozesses durch Relay-Chain-, Gateway- und Plugin-Mechanismen.</p><p>Derzeit arbeitet unser Unternehmensteam an einem Cross-Chain-Modul für eine BaaS-Plattform. Ich bin für den Cross-Chain-Adapter-Teil verantwortlich, der dem Listening-Modul und dem Anwendungskettenmodul in der BitXHub-Plattform entspricht. Der Adapter wird Cross-Chain-Ereignisse auf der Anwendungskette überwachen und die entsprechenden Parameter an das Gateway für geschäftslogische Anforderungen im Zusammenhang mit Cross-Chain weiterleiten.</p><p>Daher plane ich, eine eingehende Analyse des Quellcodes des BitXHub <a href=https://github.com/meshplus/pier-client-fabric>meshplus/pier-client-fabric</a> Plugins durchzuführen, um seine hervorragende Codestruktur und funktionalen Module zu verstehen und so meine eigene Adapter-Funktionalität besser implementieren zu können.</p><h2 id=cross-chain-transaktionsprozess>Cross-Chain-Transaktionsprozess</h2><p><img src=https://image.pseudoyu.com/images/cross_chain_plugin.png alt=cross_chain_plugin></p><p>Gemäß den Anforderungen des Cross-Chain-Geschäfts ist ein typischer Cross-Chain-Aufrufprozess im obigen Diagramm dargestellt.</p><ol><li>Die Unterkette, die Cross-Chain-Transaktionen durchführen muss, muss den Adapter installieren und den bereitgestellten Cross-Chain-Vertrag und Geschäftsvertrag bereitstellen</li><li>Wenn ein Benutzer den Geschäftsvertrag über das SDK aufruft, ruft der Vertrag den Cross-Chain-Vertrag auf und löst ein Cross-Chain-Ereignis aus</li><li>Der entsprechende Adapter der Unterkette wird die vom Cross-Chain-Vertrag ausgelösten Cross-Chain-Ereignisse abfragen oder abonnieren und an das Listening-Modul des Cross-Chain-Gateways senden</li><li>Das Cross-Chain-Gateway wird die aus dem Cross-Chain-Ereignis extrahierte Antwortvormethode und Parameter in eine für die Zielunterkette erkennbare Transaktion umwandeln</li><li>Das Cross-Chain-Gateway wird die konvertierte Transaktion an die Zielunterkette übermitteln und ausführen</li></ol><h2 id=adapter-mechanismus>Adapter-Mechanismus</h2><h3 id=schnittstellendesign>Schnittstellendesign</h3><p>Der Adapter ist hauptsächlich für die Interaktion zwischen Unterketten verantwortlich und nimmt durch Schnittstellenaufrufe an Cross-Chain-Interaktionen teil. Er stellt hauptsächlich die folgenden Schnittstellen bereit.</p><h4 id=chaincode-aufrufen>Chaincode aufrufen</h4><p>Der Adapter empfängt vom Cross-Chain-Gateway gesendete Transaktionsparameter, kapselt sie in eine von der angepassten Unterkette akzeptierte Datenstruktur und ruft den Chaincode auf.</p><h4 id=cross-chain-transaktion-abfragen>Cross-Chain-Transaktion abfragen</h4><p>Die Unterkette speichert cross-chain-bezogene Details im Payload-Feld, wie zum Beispiel Vertrag, Benutzer usw. Der Adapter analysiert und kapselt diese Informationen und stellt entsprechende Schnittstellen für das Cross-Chain-Gateway zur Abfrage bereit.</p><h4 id=historische-transaktionsinformationen-abfragen>Historische Transaktionsinformationen abfragen</h4><p>Der Adapter muss eine Abfrageschnittstelle für historische Transaktionen bereitstellen, um aktiv abzufragen, wenn aufgrund von Netzwerkübertragung oder anderen Gründen keine Cross-Chain-Ereignisse empfangen werden.</p><h4 id=grundlegende-informationen-der-anwendungskette-abfragen>Grundlegende Informationen der Anwendungskette abfragen</h4><p>Der Adapter muss eine Abfrageschnittstelle für Informationen im Zusammenhang mit seiner angepassten Unterkette für das Cross-Chain-Gateway zur Abfrage bereitstellen, wie zum Beispiel Name, Typ usw.</p><h2 id=quellcode-analyse>Quellcode-Analyse</h2><p>Als Nächstes werden wir den Quellcode des funktionalen Kernmoduls des BitXHub Cross-Chain-Plugins (Fabric) analysieren.</p><h3 id=entwurfsmuster>Entwurfsmuster</h3><p>Das Plugin-Projekt verwendet ein typisches &ldquo;Producer-Consumer&rdquo;-Modell, das sehr gut für nebenläufige Szenarien geeignet ist, die Daten abfragen/abonnieren müssen. Dieses Modell nutzt die Eigenschaft, dass zu jedem Zeitpunkt nur eine Goroutine auf bestimmte Daten im Kanal zugreift.</p><h4 id=cross-chain-ereignisse-abonnierenabfragen>Cross-Chain-Ereignisse abonnieren/abfragen</h4><p>Das Plugin muss ein Producer-Objekt konstruieren, um Cross-Chain-Ereignisse seiner entsprechenden Unterkette zu abonnieren.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Produzent konstruieren
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>ec</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>event</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>channelProvider</span><span class=p>,</span> <span class=nx>event</span><span class=p>.</span><span class=nf>WithBlockEvents</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;failed to create fabcli, error: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>c</span><span class=p>.</span><span class=nx>eventClient</span> <span class=p>=</span> <span class=nx>ec</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Cross-Chain-Ereignisse abonnieren
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>registration</span><span class=p>,</span> <span class=nx>notifier</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>ec</span><span class=p>.</span><span class=nf>RegisterChaincodeEvent</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>CCID</span><span class=p>,</span> <span class=nx>c</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>EventFilter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;failed to register chaincode event, error: %v&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>c</span><span class=p>.</span><span class=nx>registration</span> <span class=p>=</span> <span class=nx>registration</span>
</span></span></code></pre></div><p>Die Methode zum Abonnieren von Ereignissen besteht darin, die <code>RegisterChaincodeEvent()</code>-Methode von <code>fabric-sdk-go</code> aufzurufen. Es ist wichtig zu beachten, dass Sie die <code>Unregister()</code>-Methode aufrufen sollten, um das Abonnement zu kündigen, wenn Sie keine Ereignisse mehr abhören müssen.</p><p>Die <code>ccID</code> in der Methode ist die zu überwachende Chaincode-ID, <code>eventFilter</code> ist das zu überwachende Chaincode-Ereignis, und diese Methode gibt einen Kanal zum Empfangen von Daten zurück (wenn das Abonnement gekündigt wird, wird der Kanal geschlossen).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Client</span><span class=p>)</span> <span class=nf>RegisterChaincodeEvent</span><span class=p>(</span><span class=nx>ccID</span><span class=p>,</span> <span class=nx>eventFilter</span> <span class=kt>string</span><span class=p>)</span> <span class=p>(</span><span class=nx>fab</span><span class=p>.</span><span class=nx>Registration</span><span class=p>,</span> <span class=o>&lt;-</span><span class=kd>chan</span> <span class=o>*</span><span class=nx>fab</span><span class=p>.</span><span class=nx>CCEvent</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>c</span><span class=p>.</span><span class=nx>eventService</span><span class=p>.</span><span class=nf>RegisterChaincodeEvent</span><span class=p>(</span><span class=nx>ccID</span><span class=p>,</span> <span class=nx>eventFilter</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Platzieren Sie sowohl das Objekt, das den Cross-Chain-Vertrag abonniert hat (d.h. den Produzenten), als auch den Verbraucher in einer Endlosschleife. Wenn ein Cross-Chain-Ereignis ausgelöst wird, wird der Produzent kontinuierlich Daten in den Kanal legen, und der Verbraucher wird kontinuierlich Daten aus dem Kanal entnehmen.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>go</span> <span class=kd>func</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>select</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Produzent schreibt Cross-Chain-Ereignisse in den Kanal
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>case</span> <span class=nx>ccEvent</span> <span class=o>:=</span> <span class=o>&lt;-</span><span class=nx>notifier</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nx>ccEvent</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>c</span><span class=p>.</span><span class=nf>handle</span><span class=p>(</span><span class=nx>ccEvent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=c1>// Verbraucher entnimmt Cross-Chain-Ereignisdaten aus dem Kanal
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>case</span> <span class=o>&lt;-</span><span class=nx>c</span><span class=p>.</span><span class=nx>ctx</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}()</span>
</span></span></code></pre></div><p>Da sich sowohl der Produzent als auch der Verbraucher in einer Endlosschleife befinden, wird die Goroutine des Produzenten nicht beendet, und der Kanal schreibt weiterhin Daten. Wenn es keine neuen Ereignisse gibt, wird der Verbraucher blockieren und darauf warten, dass der Produzent neue Daten empfängt und in den Kanal schreibt.</p><h3 id=plugin-initialisierung-ausführung-und-schließung>Plugin-Initialisierung, Ausführung und Schließung</h3><p>Nachdem wir das gesamte Entwurfsmuster betrachtet haben, werfen wir einen Blick auf den Mechanismus, wie das gesamte Plugin-Projekt vom Haupteinstiegspunkt des Programms aus läuft.</p><h4 id=initialisierung>Initialisierung</h4><p>Bei der Initialisierung des Client-Programms wird zunächst ein Verbraucher-Objekt gemäß einer benutzerdefinierten Struktur konstruiert.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Verbraucher konstruieren
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>mgh</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>newFabricHandler</span><span class=p>(</span><span class=nx>contractmeta</span><span class=p>.</span><span class=nx>EventFilter</span><span class=p>,</span> <span class=nx>eventC</span><span class=p>,</span> <span class=nx>appchainID</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>done</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>(</span><span class=kd>chan</span> <span class=kt>bool</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>csm</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>NewConsumer</span><span class=p>(</span><span class=nx>configPath</span><span class=p>,</span> <span class=nx>contractmeta</span><span class=p>,</span> <span class=nx>mgh</span><span class=p>,</span> <span class=nx>done</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=ausführung>Ausführung</h4><p>Der Einstiegspunkt für die Programmausführung ist einfach, es wird nur der Cross-Chain-Vertrag abgefragt und das Verbraucher-Objekt gestartet.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Client</span><span class=p>)</span> <span class=nf>Start</span><span class=p>()</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>logger</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;Fabric consumer started&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>go</span> <span class=nx>c</span><span class=p>.</span><span class=nf>polling</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>c</span><span class=p>.</span><span class=nx>consumer</span><span class=p>.</span><span class=nf>Start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=schließung>Schließung</h4><p>Das Schließen des Plugins ist ebenfalls einfach, es stoppt nur die Programmausführung und meldet sich von den Ereignissen ab.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// Plugin schließen
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Client</span><span class=p>)</span> <span class=nf>Stop</span><span class=p>()</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>c</span><span class=p>.</span><span class=nx>ticker</span><span class=p>.</span><span class=nf>Stop</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>c</span><span class=p>.</span><span class=nx>done</span> <span class=o>&lt;-</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>c</span><span class=p>.</span><span class=nx>consumer</span><span class=p>.</span><span class=nf>Shutdown</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Abmeldung von Ereignissen im Verbraucher-Paket.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Consumer</span><span class=p>)</span> <span class=nf>Shutdown</span><span class=p>()</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>c</span><span class=p>.</span><span class=nx>eventClient</span><span class=p>.</span><span class=nf>Unregister</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>registration</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Bei genauerer Betrachtung ruft das Abmelden von Ereignissen die <code>Unregister()</code>-Methode von <code>fabric-sdk-go</code> auf, die das Abonnement für dieses Ereignis kündigt und den entsprechenden Kanal schließt.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Client</span><span class=p>)</span> <span class=nf>Unregister</span><span class=p>(</span><span class=nx>reg</span> <span class=nx>fab</span><span class=p>.</span><span class=nx>Registration</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>c</span><span class=p>.</span><span class=nx>eventService</span><span class=p>.</span><span class=nf>Unregister</span><span class=p>(</span><span class=nx>reg</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=schnittstellenimplementierung>Schnittstellenimplementierung</h3><p>Neben dem Abonnieren und Überwachen von Ereignissen stellt das Plugin auch eine Reihe von Abfrageschnittstellen für den Gateway bereit, um entsprechende Cross-Chain-Operationen durchzuführen.</p><h4 id=getproof>getProof()</h4><p>Zum Beispiel das Abrufen von Proof-Informationen usw.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Client</span><span class=p>)</span> <span class=nf>getProof</span><span class=p>(</span><span class=nx>response</span> <span class=nx>channel</span><span class=p>.</span><span class=nx>Response</span><span class=p>)</span> <span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>proof</span> <span class=p>[]</span><span class=kt>byte</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>handle</span> <span class=p>=</span> <span class=kd>func</span><span class=p>(</span><span class=nx>response</span> <span class=nx>channel</span><span class=p>.</span><span class=nx>Response</span><span class=p>)</span> <span class=p>([]</span><span class=kt>byte</span><span class=p>,</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=c1>// Proof von Fabric abfragen
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nx>l</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>ledger</span><span class=p>.</span><span class=nf>New</span><span class=p>(</span><span class=nx>c</span><span class=p>.</span><span class=nx>consumer</span><span class=p>.</span><span class=nx>channelProvider</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=nx>t</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>l</span><span class=p>.</span><span class=nf>QueryTransaction</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>TransactionID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>pd</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>common</span><span class=p>.</span><span class=nx>Payload</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>proto</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>(</span><span class=nx>t</span><span class=p>.</span><span class=nx>TransactionEnvelope</span><span class=p>.</span><span class=nx>Payload</span><span class=p>,</span> <span class=nx>pd</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=nx>pt</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>peer</span><span class=p>.</span><span class=nx>Transaction</span><span class=p>{}</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>proto</span><span class=p>.</span><span class=nf>Unmarshal</span><span class=p>(</span><span class=nx>pd</span><span class=p>.</span><span class=nx>Data</span><span class=p>,</span> <span class=nx>pt</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=kc>nil</span><span class=p>,</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>pt</span><span class=p>.</span><span class=nx>Actions</span><span class=p>[</span><span class=mi>0</span><span class=p>].</span><span class=nx>Payload</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>retry</span><span class=p>.</span><span class=nf>Retry</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>attempt</span> <span class=kt>uint</span><span class=p>)</span> <span class=kt>error</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=nx>err</span> <span class=kt>error</span>
</span></span><span class=line><span class=cl>		<span class=nx>proof</span><span class=p>,</span> <span class=nx>err</span> <span class=p>=</span> <span class=nf>handle</span><span class=p>(</span><span class=nx>response</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>logger</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=s>&#34;Can&#39;t get proof&#34;</span><span class=p>,</span> <span class=s>&#34;error&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>err</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl>	<span class=p>},</span> <span class=nx>strategy</span><span class=p>.</span><span class=nf>Wait</span><span class=p>(</span><span class=mi>2</span><span class=o>*</span><span class=nx>time</span><span class=p>.</span><span class=nx>Second</span><span class=p>));</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>logger</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=s>&#34;Can&#39;t get proof&#34;</span><span class=p>,</span> <span class=s>&#34;error&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>proof</span><span class=p>,</span> <span class=kc>nil</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=getchainid>getChainID()</h4><p>Diese Schnittstelle wird verwendet, um die Chain-ID zu erhalten</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Client</span><span class=p>)</span> <span class=nf>GetChainID</span><span class=p>()</span> <span class=p>(</span><span class=kt>string</span><span class=p>,</span> <span class=kt>string</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>request</span> <span class=o>:=</span> <span class=nx>channel</span><span class=p>.</span><span class=nx>Request</span><span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>ChaincodeID</span><span class=p>:</span> <span class=nx>c</span><span class=p>.</span><span class=nx>meta</span><span class=p>.</span><span class=nx>CCID</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>Fcn</span><span class=p>:</span>         <span class=nx>GetChainId</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>response</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>c</span><span class=p>.</span><span class=nx>consumer</span><span class=p>.</span><span class=nx>ChannelClient</span><span class=p>.</span><span class=nf>Execute</span><span class=p>(</span><span class=nx>request</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=o>||</span> <span class=nx>response</span><span class=p>.</span><span class=nx>Payload</span> <span class=o>==</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nx>chainIds</span> <span class=o>:=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Split</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>response</span><span class=p>.</span><span class=nx>Payload</span><span class=p>),</span> <span class=s>&#34;-&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>chainIds</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;&#34;</span><span class=p>,</span> <span class=s>&#34;&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>chainIds</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=nx>chainIds</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=andere-schnittstellen>Andere Schnittstellen</h4><p>Für weitere Details zur Schnittstellenimplementierung, siehe <a href=https://github.com/meshplus/pier-client-fabric/blob/master/client.go>meshplus/pier-client-fabric/client.go</a>.</p><h3 id=cross-chain-vertrag>Cross-Chain-Vertrag</h3><p>Der Cross-Chain-Vertrag ist ein wichtiger Teil der Implementierung der Plugin-Überwachung. Wenn das Geschäft Cross-Chain benötigt, wird es einheitlich den Cross-Chain-Vertrag aufrufen und mit dem Cross-Chain-Gateway interagieren.</p><p>Der Cross-Chain-Vertrag stellt eine Reihe von Schnittstellen für Geschäftsverträge zur Implementierung bereit. Daher kann das Schreiben von Geschäftsverträgen nach bestimmten Spezifikationen die Entwicklung und Wartung von Cross-Chain-Geschäften vereinfachen. Für Details zum Schreiben von Cross-Chain-Verträgen, siehe &lt;<a href=https://github.com/meshplus/bitxhub/wiki/%E8%B7%A8%E9%93%BE%E5%90%88%E7%BA%A6%E7%BC%96%E5%86%99%E6%96%87%E6%A1%A3>Dokumentation zum Schreiben von Cross-Chain-Verträgen</a>>.</p><h4 id=ereignisimplementierung>Ereignisimplementierung</h4><p>Wie wirft der Cross-Chain-Vertrag Cross-Chain-Ereignisse an das Plugin?</p><p>In der <code>Invoke()</code>-Methode des Cross-Chain-Vertrags erhält der Cross-Chain-Vertrag zunächst die Aufrufmethode und die entsprechenden Parameter des Vertragsaufrufers (d.h. des Geschäftsvertrags) durch die <code>GetFunctionAndParameters()</code>-Methode und ruft dann verschiedene Verträge auf, indem er den Methodennamen beurteilt.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>broker</span> <span class=o>*</span><span class=nx>Broker</span><span class=p>)</span> <span class=nf>Invoke</span><span class=p>(</span><span class=nx>stub</span> <span class=nx>shim</span><span class=p>.</span><span class=nx>ChaincodeStubInterface</span><span class=p>)</span> <span class=nx>pb</span><span class=p>.</span><span class=nx>Response</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>function</span><span class=p>,</span> <span class=nx>args</span> <span class=o>:=</span> <span class=nx>stub</span><span class=p>.</span><span class=nf>GetFunctionAndParameters</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    	<span class=k>switch</span> <span class=nx>function</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>case</span> <span class=s>&#34;getChainId&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>broker</span><span class=p>.</span><span class=nf>getChainId</span><span class=p>(</span><span class=nx>stub</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>case</span> <span class=s>&#34;getInMessage&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>broker</span><span class=p>.</span><span class=nf>getInMessage</span><span class=p>(</span><span class=nx>stub</span><span class=p>,</span> <span class=nx>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>case</span> <span class=s>&#34;getOutMessage&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>broker</span><span class=p>.</span><span class=nf>getOutMessage</span><span class=p>(</span><span class=nx>stub</span><span class=p>,</span> <span class=nx>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=k>case</span> <span class=s>&#34;EmitInterchainEvent&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>broker</span><span class=p>.</span><span class=nf>EmitInterchainEvent</span><span class=p>(</span><span class=nx>stub</span><span class=p>,</span> <span class=nx>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=s>&#34;invalid function: &#34;</span> <span class=o>+</span> <span class=nx>function</span> <span class=o>+</span> <span class=s>&#34;, args: &#34;</span> <span class=o>+</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>Join</span><span class=p>(</span><span class=nx>args</span><span class=p>,</span> <span class=s>&#34;,&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>broker</span> <span class=o>*</span><span class=nx>Broker</span><span class=p>)</span> <span class=nf>EmitInterchainEvent</span><span class=p>(</span><span class=nx>stub</span> <span class=nx>shim</span><span class=p>.</span><span class=nx>ChaincodeStubInterface</span><span class=p>,</span> <span class=nx>args</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span> <span class=nx>pb</span><span class=p>.</span><span class=nx>Response</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Prüfen, ob die Anzahl der Eingabeparameter korrekt ist
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// Cross-Chain-Verträge müssen viele Parameter übergeben, da Aufruffehler leicht zu Sicherheitsproblemen in der Kette führen können
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=nx>args</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>5</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=s>&#34;incorrect number of arguments, expecting 7&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Parameter lesen und in entsprechenden Variablen speichern
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>	<span class=c1>// Zielketten-ID
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>dstServiceID</span> <span class=o>:=</span> <span class=nx>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Eigene Chaincode-ID
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>cid</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>getChaincodeID</span><span class=p>(</span><span class=nx>stub</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// bxhID und appchainID abrufen
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>curFullID</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>broker</span><span class=p>.</span><span class=nf>genFullServiceID</span><span class=p>(</span><span class=nx>stub</span><span class=p>,</span> <span class=nx>cid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Aktuelle Ketten-ID und Zielketten-ID zu einer Ausgabe-Cross-Chain-Dienstgruppe kombinieren
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>outServicePair</span> <span class=o>:=</span> <span class=nf>genServicePair</span><span class=p>(</span><span class=nx>curFullID</span><span class=p>,</span> <span class=nx>dstServiceID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Key-Value-Paare der Ausgabewerte abrufen
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>outMeta</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>broker</span><span class=p>.</span><span class=nf>getMap</span><span class=p>(</span><span class=nx>stub</span><span class=p>,</span> <span class=nx>outterMeta</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Prüfen, ob die Ausgabe-Cross-Chain-Dienstgruppe im Key-Value-Paar vorhanden ist, wenn nicht, auf 0 setzen
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>if</span> <span class=nx>_</span><span class=p>,</span> <span class=nx>ok</span> <span class=o>:=</span> <span class=nx>outMeta</span><span class=p>[</span><span class=nx>outServicePair</span><span class=p>];</span> <span class=p>!</span><span class=nx>ok</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>outMeta</span><span class=p>[</span><span class=nx>outServicePair</span><span class=p>]</span> <span class=p>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Transaktionsinformationen kapseln
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>tx</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>Event</span><span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>Index</span><span class=p>:</span>     <span class=nx>outMeta</span><span class=p>[</span><span class=nx>outServicePair</span><span class=p>]</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>DstFullID</span><span class=p>:</span> <span class=nx>dstServiceID</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>SrcFullID</span><span class=p>:</span> <span class=nx>curFullID</span><span class=p>,</span>
</span></span><span class=line><span class=cl>		<span class=nx>Func</span><span class=p>:</span>      <span class=nx>args</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span>
</span></span><span class=line><span class=cl>		<span class=nx>Args</span><span class=p>:</span>      <span class=nx>args</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span>
</span></span><span class=line><span class=cl>		<span class=nx>Argscb</span><span class=p>:</span>    <span class=nx>args</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span>
</span></span><span class=line><span class=cl>		<span class=nx>Argsrb</span><span class=p>:</span>    <span class=nx>args</span><span class=p>[</span><span class=mi>4</span><span class=p>],</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Ausgabedienst selbst inkrementieren
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>outMeta</span><span class=p>[</span><span class=nx>outServicePair</span><span class=p>]</span><span class=o>++</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Transaktionsinformationen in JSON-Format umwandeln
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>txValue</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>tx</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Ausgabe-Ereignisnachricht formatieren
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>key</span> <span class=o>:=</span> <span class=nx>broker</span><span class=p>.</span><span class=nf>outMsgKey</span><span class=p>(</span><span class=nx>outServicePair</span><span class=p>,</span> <span class=nx>strconv</span><span class=p>.</span><span class=nf>FormatUint</span><span class=p>(</span><span class=nx>tx</span><span class=p>.</span><span class=nx>Index</span><span class=p>,</span> <span class=mi>10</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Nachricht und Transaktionsinformationen in das Ledger schreiben (Persistenz)
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>stub</span><span class=p>.</span><span class=nf>PutState</span><span class=p>(</span><span class=nx>key</span><span class=p>,</span> <span class=nx>txValue</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;persist event: %w&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>).</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Den entsprechenden Cross-Chain-Transaktionsereignisnamen setzen und die Transaktionsinformationen im Payload speichern
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>stub</span><span class=p>.</span><span class=nf>SetEvent</span><span class=p>(</span><span class=nx>interchainEventName</span><span class=p>,</span> <span class=nx>txValue</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;set event: %w&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>).</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// Metadaten-Status in das Ledger schreiben
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>broker</span><span class=p>.</span><span class=nf>putMap</span><span class=p>(</span><span class=nx>stub</span><span class=p>,</span> <span class=nx>outterMeta</span><span class=p>,</span> <span class=nx>outMeta</span><span class=p>);</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Success</span><span class=p>(</span><span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Dies geschieht beim Aufrufen des Cross-Chain-Vertrags. Im Wesentlichen setzt er nur ein Ereignis-Trigger durch <code>SetEvent()</code> im Cross-Chain-Vertrag und abonniert und überwacht es dann im Plugin durch <code>RegisterChaincodeEvent()</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nf>SetEvent</span><span class=p>(</span><span class=nx>name</span> <span class=kt>string</span><span class=p>,</span> <span class=nx>payload</span> <span class=p>[]</span><span class=kt>byte</span><span class=p>)</span> <span class=kt>error</span>
</span></span></code></pre></div><p><code>SetEvent()</code> ist eine Schnittstelle unter dem <code>shim</code>-Paket, die hauptsächlich Name und Payload-Array übergibt. Für Details zu den Prinzipien und Details der Chaincode-Ereignisüberwachung, siehe &lt;<a href=https://www.pseudoyu.com/de/2021/09/01/blockchain_hyperledger_fabric_gosdk_event/>Hyperledger Fabric Go SDK Ereignisanalyse</a>>.</p><h3 id=geschäftsvertrag>Geschäftsvertrag</h3><p>Nachdem wir den Cross-Chain-Vertrag analysiert haben, lassen Sie uns sehen, wie der Geschäftsvertrag den Cross-Chain-Vertrag aufruft, wobei wir den Datenaustauschvertrag <code>data_swapper.go</code> im Beispiel als Instanz nehmen.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=o>*</span><span class=nx>DataSwapper</span><span class=p>)</span> <span class=nf>get</span><span class=p>(</span><span class=nx>stub</span> <span class=nx>shim</span><span class=p>.</span><span class=nx>ChaincodeStubInterface</span><span class=p>,</span> <span class=nx>args</span> <span class=p>[]</span><span class=kt>string</span><span class=p>)</span> <span class=nx>pb</span><span class=p>.</span><span class=nx>Response</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>switch</span> <span class=nb>len</span><span class=p>(</span><span class=nx>args</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=c1>// args[0]: key
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nx>value</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>stub</span><span class=p>.</span><span class=nf>GetState</span><span class=p>(</span><span class=nx>args</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Success</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=c1>// args[0]: Ziel-Service-ID
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=c1>// args[1]: key
</span></span></span><span class=line><span class=cl><span class=c1></span>		<span class=nx>b</span> <span class=o>:=</span> <span class=nx>util</span><span class=p>.</span><span class=nf>ToChaincodeArgs</span><span class=p>(</span><span class=nx>emitInterchainEventFunc</span><span class=p>,</span> <span class=nx>args</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=s>&#34;interchainGet,interchainSet,&#34;</span><span class=p>,</span> <span class=nx>args</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=nx>args</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=s>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=nx>response</span> <span class=o>:=</span> <span class=nx>stub</span><span class=p>.</span><span class=nf>InvokeChaincode</span><span class=p>(</span><span class=nx>brokerContractName</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nx>channelID</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>response</span><span class=p>.</span><span class=nx>Status</span> <span class=o>!=</span> <span class=nx>shim</span><span class=p>.</span><span class=nx>OK</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;invoke broker chaincode %s error: %s&#34;</span><span class=p>,</span> <span class=nx>brokerContractName</span><span class=p>,</span> <span class=nx>response</span><span class=p>.</span><span class=nx>Message</span><span class=p>).</span><span class=nf>Error</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Success</span><span class=p>(</span><span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=nx>shim</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=s>&#34;incorrect number of arguments&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Um Informationen von anderen Ketten im Geschäftsvertrag <code>data_swapper.go</code> zu erhalten, beurteilt es zunächst die Länge des Eingabeparameter-Arrays <code>args []string</code> durch <code>switch...case...</code>, wenn die <code>get</code>-Methode aufgerufen wird. Wenn die Länge 1 ist, ruft es normal seinen eigenen Vertrag zur Abfrage auf, und wenn die Länge 2 ist, verwendet es zuerst die von Fabric bereitgestellte <code>ToChaincodeArgs()</code>-Methode, um die Parameter von <code>string</code> in das Chaincode-Parameter-Array-Format zu konvertieren.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>ToChaincodeArgs</span><span class=p>(</span><span class=nx>args</span> <span class=o>...</span><span class=kt>string</span><span class=p>)</span> <span class=p>[][]</span><span class=kt>byte</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>bargs</span> <span class=o>:=</span> <span class=nb>make</span><span class=p>([][]</span><span class=kt>byte</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>args</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>arg</span> <span class=o>:=</span> <span class=k>range</span> <span class=nx>args</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>bargs</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span> <span class=p>=</span> <span class=p>[]</span><span class=nb>byte</span><span class=p>(</span><span class=nx>arg</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>bargs</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Dann ruft es direkt den Cross-Chain-Vertrag durch die <code>InvokeChaincode()</code>-Methode im Geschäfts-Chaincode auf und übergibt Parameter und Kanal-ID, wodurch ein Cross-Chain-Datenabfrage-Chaincode-Aufruf abgeschlossen wird.</p><h2 id=fazit>Fazit</h2><p>Das oben Genannte ist eine Analyse des Cross-Chain-Transaktionsprozesses und des BitXHub Cross-Chain-Plugin (Fabric) Quellcodes. Ich hoffe, dass ich durch diesen Prozess mein Verständnis für Cross-Chain-Mechanismen und verwandte Plattformen vertiefen und in Zukunft besser an deren Open-Source-Aufbau teilnehmen kann.</p><h2 id=referenzen>Referenzen</h2><blockquote><ol><li><a href=https://github.com/gocn/opentalk/tree/main/PhaseTen_BitXHub>Cross-chain Technology Platform BitXHub</a></li><li><a href=https://meshplus.github.io/bitxhub/bitxhub/introduction/summary/>BitXHub Document</a></li><li><a href=https://github.com/meshplus/pier-client-fabric>meshplus/pier-client-fabric</a></li><li><a href=https://tech.hyperchain.cn/bitxhub-design-thinking/>Ten Questions about BitXHub: Discussing the Architecture Design of Cross-chain Platforms</a></li><li><a href=https://github.com/meshplus/bitxhub/wiki/%E8%B7%A8%E9%93%BE%E5%90%88%E7%BA%A6%E7%BC%96%E5%86%99%E6%96%87%E6%A1%A3>Cross-chain Contract Writing Documentation</a></li><li><a href=https://www.pseudoyu.com/de/2021/09/01/blockchain_hyperledger_fabric_gosdk_event/>Hyperledger Fabric Go SDK Event Analysis</a></li></ol></blockquote></articl><h2>Verwandte Beiträge</h2><dl class=row></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2023-02-10</dt><dd class=col-md-9><a href=/de/2023/02/10/cosmos_introduction_and_explaination/>Cosmos Blockchain-Architektur und Tendermint-Konsensmechanismus</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2021-09-07</dt><dd class=col-md-9><a href=/de/2021/09/07/blockchain_baas_platform/>Einführung und Architektur von Blockchain-as-a-Service (BaaS) Plattformen</a></dd></dl><dt class=col-md-3>2021-09-06</dt><dd class=col-md-9><a href=/de/2021/09/06/blockchain_crosschain/>Prinzipien und Praxis der Cross-Chain-Technologie</a></dd></dl><dt class=col-md-3>2021-09-01</dt><dd class=col-md-9><a href=/de/2021/09/01/blockchain_hyperledger_fabric_gosdk_event/>Analyse der Hyperledger Fabric Go SDK Events</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2021-03-23</dt><dd class=col-md-9><a href=/de/2021/03/23/blockchain_hyperledger_fabric_network/>Eine kurze Analyse des Netzwerks und Sicherheitssystems von Hyperledger Fabric</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://www.pseudoyu.com><img src=/images/author.webp alt=pseudoyu></a></div><div class=author-content><p class=author-title>Autor</p><p class=author-name>pseudoyu</p><p class=author-desc>Backend- & Smart-Contract-Entwickler, MSc-Absolvent in ECIC (Electronic Commerce and Internet Computing) an der Universität Hongkong (HKU). Lerne und entwickle gerne Neues. <a href=https://github.com/pseudoyu>Folge mir auf GitHub</a></p></div></div></div><div align=center><div class=comment-underline></div></div><br><div class=comments><div class=title><span>Comments</span>
<span class=counter><span class=remark42__counter data-url=https://www.pseudoyu.com/de/2021/09/09/blockchain_crosschain_bitxhub/></span></span></div><div id=remark42></div></div><script>var remark_config={host:"https://comments.pseudoyu.com",site_id:"pseudoyu.com",components:["embed","counter"],max_shown_comments:20,simple_view:!0,theme:"light"}</script><script>(function(){const t=window.REMARK42;if(t)t.destroy(),t.createInstance(remark_config);else for(const t of remark_config.components){var n=document,e=n.createElement("script");e.src=`${remark_config.host}/web/${t}.mjs`,e.type="module",e.defer=!0,e.setAttribute("data-no-instant",""),n.head.appendChild(e)}})()</script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Sitemap</div><ul class=list-unstyled><li><a href=https://www.pseudoyu.com/de/tags/>Schlagworte</a></li><li><a href=https://www.pseudoyu.com/de/categories/>Kategorien</a></li><li><a rel=alternate type=application/rss+xml href=https://www.pseudoyu.com/de/index.xml><i class="fas fa-rss-square"></i> RSS-Feed</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Social</div><ul class=list-unstyled><li><a href=https://t.me/pseudoyulife rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/pseudo_yu rel=noopener target=_blank>Twitter</a></li><li><a href=https://www.instagram.com/pseudo.yu/ rel=noopener target=_blank>Instagram</a></li><li><a href=https://space.bilibili.com/5374948/ rel=noopener target=_blank>BiliBili</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Links</div><ul class=list-unstyled><li><a href=https://github.com/pseudoyu rel=noopener target=_blank>Yu's GitHub</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em><a href="https://stats.pseudoyu.com?access-token=2m1u5i2k413q0733h2a3332w3m1t6r634g1m6n" rel=noopener target=_blank>Yu's blog analytics</a></em></small><br><small><em>Powered by <a href=https://gohugo.io rel=noopener target=_blank>Hugo</a> - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>den</a></em></small><br><small><em><a href=https://www.hku.hk rel=noopener target=_blank>The University of Hong Kong</a> - <a href=https://www.cs.hku.hk rel=noopener target=_blank>CS</a></em></small><br><small>&copy;
Yu Zhang
2020 -
2024</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=scroll-top class=scroll-top accesskey=g><span class=arrow-icon></span></a>
<script>var mybutton=document.getElementById("scroll-top");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script></body></html>