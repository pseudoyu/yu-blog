<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.105.0"><meta charset=utf-8><title>Solidity Smart Contract Development - Mastering ethers.js · Pseudoyu</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script data-goatcounter=https://stats.pseudoyu.com/count async src=//stats.pseudoyu.com/count.js></script><meta name=description content="《後來的我們 - 五月天》 Preface In the previous article &amp;ldquo;Solidity Smart Contract Development - Basics&amp;rdquo;, we learned the basic syntax of Solidity and understood that we can debug using frameworks like Brownie and HardHat. In another article &amp;ldquo;Solidity Smart Contract Development - Mastering Web3.py&amp;rdquo;, we also interacted directly with our local Ganache node using Web3.py. Originally, because I was more familiar with Python,"><meta name=keywords content="hugo,blockchain,programming"><link rel=canonical href=https://www.pseudoyu.com/en/2022/06/08/learn_solidity_from_scratch_ethersjs/><link rel=alternate href=https://www.pseudoyu.com/zh/2022/06/08/learn_solidity_from_scratch_ethersjs/ hreflang=zh><link rel=alternate href=https://www.pseudoyu.com/de/2022/06/08/learn_solidity_from_scratch_ethersjs/ hreflang=de><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href=https://www.pseudoyu.com/css/den.css><link rel=stylesheet href=https://www.pseudoyu.com/css/custom.css><meta property="og:title" content="Solidity Smart Contract Development - Mastering ethers.js"><meta property="og:description" content="《後來的我們 - 五月天》 Preface In the previous article &ldquo;Solidity Smart Contract Development - Basics&rdquo;, we learned the basic syntax of Solidity and understood that we can debug using frameworks like Brownie and HardHat. In another article &ldquo;Solidity Smart Contract Development - Mastering Web3.py&rdquo;, we also interacted directly with our local Ganache node using Web3.py. Originally, because I was more familiar with Python,"><meta property="og:type" content="article"><meta property="og:url" content="https://www.pseudoyu.com/en/2022/06/08/learn_solidity_from_scratch_ethersjs/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-08T00:25:45+08:00"><meta property="article:modified_time" content="2022-06-08T00:25:45+08:00"><meta itemprop=name content="Solidity Smart Contract Development - Mastering ethers.js"><meta itemprop=description content="《後來的我們 - 五月天》 Preface In the previous article &ldquo;Solidity Smart Contract Development - Basics&rdquo;, we learned the basic syntax of Solidity and understood that we can debug using frameworks like Brownie and HardHat. In another article &ldquo;Solidity Smart Contract Development - Mastering Web3.py&rdquo;, we also interacted directly with our local Ganache node using Web3.py. Originally, because I was more familiar with Python,"><meta itemprop=datePublished content="2022-06-08T00:25:45+08:00"><meta itemprop=dateModified content="2022-06-08T00:25:45+08:00"><meta itemprop=wordCount content="1070"><meta itemprop=keywords content="blockchain,solidity,ethereum,web3,smart contract,javascript,ethers.js,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Solidity Smart Contract Development - Mastering ethers.js"><meta name=twitter:description content="《後來的我們 - 五月天》 Preface In the previous article &ldquo;Solidity Smart Contract Development - Basics&rdquo;, we learned the basic syntax of Solidity and understood that we can debug using frameworks like Brownie and HardHat. In another article &ldquo;Solidity Smart Contract Development - Mastering Web3.py&rdquo;, we also interacted directly with our local Ganache node using Web3.py. Originally, because I was more familiar with Python,"></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://www.pseudoyu.com/images/background.webp);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://www.pseudoyu.com/en/><img class="mr20 header-logo-image" src=https://image.pseudoyu.com/images/fly.png alt=logo>
Pseudoyu</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/category/ideas/>Idea</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/category/tools/>Tool</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/category/develop/>Develop</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/links/>Links</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/about/>About</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/search/>Search</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/zh/><i class="fas fa-globe"></i> 简</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/><i class="fas fa-globe"></i> DE</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>Solidity Smart Contract Development - Mastering ethers.js</h1><p class=header-date>Author:
pseudoyu
| <span>1070 words, 3 minutes</span>
| <span class=remark42__counter data-url=https://www.pseudoyu.com/en/2022/06/08/learn_solidity_from_scratch_ethersjs/></span> comments
| 2022-06-08
| Category:
<a href=https://www.pseudoyu.com/en/category/develop/>Develop</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://www.pseudoyu.com/en/tag/blockchain/>blockchain</a>,
<a href=https://www.pseudoyu.com/en/tag/ethereum/>ethereum</a>,
<a href=https://www.pseudoyu.com/en/tag/ethers.js/>ethers.js</a>,
<a href=https://www.pseudoyu.com/en/tag/javascript/>javascript</a>,
<a href=https://www.pseudoyu.com/en/tag/smart-contract/>smart contract</a>,
<a href=https://www.pseudoyu.com/en/tag/solidity/>solidity</a>,
<a href=https://www.pseudoyu.com/en/tag/web3/>web3</a></p><div class=clearfix></div><p class="float-right translations"><i class="fas fa-language" aria-hidden=true></i>
Translations:
<a href=https://www.pseudoyu.com/zh/2022/06/08/learn_solidity_from_scratch_ethersjs/>ZH</a>, <a href=https://www.pseudoyu.com/de/2022/06/08/learn_solidity_from_scratch_ethersjs/>DE</a></p></div></div></div></div></div><main><div class="container content"><articl data-pagefind-body><figure><audio controls preload=metadata><source src=/audios/here_after_us.mp3 type=audio/mpeg></audio><i><figcaption>《後來的我們 - 五月天》</figcaption></i></figure><h2 id=preface>Preface</h2><p>In the previous article &ldquo;<a href=https://www.pseudoyu.com/en/2022/05/25/learn_solidity_from_scratch_basic/>Solidity Smart Contract Development - Basics</a>&rdquo;, we learned the basic syntax of Solidity and understood that we can debug using frameworks like <a href=https://github.com/eth-brownie/brownie>Brownie</a> and <a href=https://github.com/NomicFoundation/hardhat>HardHat</a>. In another article &ldquo;<a href=https://www.pseudoyu.com/en/2022/05/30/learn_solidity_from_scratch_web3py/>Solidity Smart Contract Development - Mastering Web3.py</a>&rdquo;, we also interacted directly with our local Ganache node using Web3.py.</p><p>Originally, because I was more familiar with Python, I planned to use the Brownie framework for subsequent development. However, after some research, I found that the industry predominantly uses the HardHat framework, which also has more extensions. Additionally, the Solidity tutorial I&rsquo;m following has updated to a <a href="https://www.youtube.com/watch?v=gyMwXuJrbJQ">Javascript version</a>, so I decided to learn it.</p><p>To better understand the principles and lay a good foundation for our subsequent use of the framework, this time we will use <a href=https://github.com/ethers-io/ethers.js/>ethers.js</a> to interact with our Rinkeby test network deployed on the <a href=https://dashboard.alchemyapi.io>Alchemy</a> platform. We will implement basic contract compilation, deployment to the Rinkeby network, and interaction with the contract.</p><p>You can click <a href=https://github.com/pseudoyu/learn-solidity/tree/master/ethers_simple_storage>here</a> to access the code repository for this test demo.</p><h2 id=ethersjs>ethers.js</h2><p>ethers.js is an open-source library for Javascript that can interact with the Ethereum network. Its GitHub address is <a href=https://github.com/ethers-io/ethers.js/>ethers.io/ethers.js</a>, and you can visit its <a href=https://docs.ethers.io/>official documentation</a> for usage.</p><h3 id=installation>Installation</h3><p>We can install <code>ethers.js</code> using yarn, as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yarn add ethers
</span></span></code></pre></div><p><img src=https://image.pseudoyu.com/images/yarn_add_ethers.png alt=yarn_add_ethers></p><h3 id=usage>Usage</h3><p>Import the library using <code>require</code> to use it</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ethers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ethers&#39;</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=solidity-contract-compilation>Solidity Contract Compilation</h2><h3 id=contract-source-code>Contract Source Code</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-solidity data-lang=solidity><span class=line><span class=cl><span class=c1>// SPDX-License-Identifier: MIT
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>pragma solidity</span> <span class=o>^</span><span class=mi>0</span><span class=p>.</span><span class=mi>8</span><span class=p>.</span><span class=mi>7</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>contract</span> <span class=nc>SimpleStorage</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>uint256</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=n>favoriteBool</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>struct</span> <span class=nc>People</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>uint256</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>string</span> <span class=nb>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>People</span> <span class=k>public</span> <span class=n>person</span> <span class=o>=</span> <span class=n>People</span><span class=p>({</span><span class=n>favoriteNumber</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span> <span class=nb>name</span><span class=o>:</span> <span class=s>&#34;Arthur&#34;</span><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>People</span><span class=p>[]</span> <span class=k>public</span> <span class=n>people</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>mapping</span><span class=p>(</span><span class=kt>string</span> <span class=o>=&gt;</span> <span class=kt>uint256</span><span class=p>)</span> <span class=k>public</span> <span class=n>nameToFavoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>store</span><span class=p>(</span><span class=kt>uint256</span> <span class=n>_favoriteNumber</span><span class=p>)</span> <span class=k>public</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>favoriteNumber</span> <span class=o>=</span> <span class=n>_favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>retrieve</span><span class=p>()</span> <span class=k>public</span> <span class=k>view</span> <span class=k>returns</span> <span class=p>(</span><span class=kt>uint256</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>function</span> <span class=nf>addPerson</span><span class=p>(</span><span class=kt>string</span> <span class=k>memory</span> <span class=n>_name</span><span class=p>,</span> <span class=kt>uint256</span> <span class=n>_favoriteNumber</span><span class=p>)</span> <span class=k>public</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>people</span><span class=p>.</span><span class=n>push</span><span class=p>(</span><span class=n>People</span><span class=p>({</span><span class=n>favoriteNumber</span><span class=o>:</span> <span class=n>_favoriteNumber</span><span class=p>,</span> <span class=nb>name</span><span class=o>:</span> <span class=n>_name</span><span class=p>}));</span>
</span></span><span class=line><span class=cl>        <span class=n>nameToFavoriteNumber</span><span class=p>[</span><span class=n>_name</span><span class=p>]</span> <span class=o>=</span> <span class=n>_favoriteNumber</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This is a simple storage contract that uses a People struct object to store a person&rsquo;s name and their favorite number, uses an array to store information for multiple people, and provides methods for adding and searching.</p><h3 id=reading-the-contract-source-file>Reading the Contract Source File</h3><p>After completing the Solidity contract writing and syntax checking through VSCode or other editors, we need to compile the contract into abi file and bytecode.</p><p>We can install the <code>solc</code> command-line tool through <code>yarn</code> for editing, and we can choose the corresponding version. The command is as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yarn add solc@0.8.7-fixed
</span></span></code></pre></div><p>After installation, we can use the <code>solcjs</code> command for compilation. The command is as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yarn solcjs --bin --abi --include-path node_modules/ --base-path . -o . SimpleStorage.sol
</span></span></code></pre></div><p>Since compiling contracts is a high-frequency operation, we can configure the <code>compile</code> script command in <code>package.json</code> as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;scripts&#34;</span><span class=err>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;compile&#34;</span><span class=p>:</span> <span class=s2>&#34;yarn solcjs --bin --abi --include-path node_modules/ --base-path . -o . SimpleStorage.sol&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>After that, you only need to execute <code>yarn compile</code> to generate the contract compilation files.</p><h3 id=obtaining-compilation-results>Obtaining Compilation Results</h3><p>After compilation, abi and bytecode files will be generated, with <code>.bin</code> and <code>.abi</code> as suffixes respectively.</p><h4 id=obtaining-bytecode-and-abi>Obtaining bytecode and abi</h4><p>The deployment and interaction of Solidity contracts require two parts: bytecode and abi. We can write them into corresponding variables for subsequent operations through the following code.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fs-extra&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>abi</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s2>&#34;./SimpleStorage_sol_SimpleStorage.abi&#34;</span><span class=p>,</span> <span class=s2>&#34;utf-8&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>binary</span> <span class=o>=</span> <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s2>&#34;./SimpleStorage_sol_SimpleStorage.bin&#34;</span><span class=p>,</span> <span class=s2>&#34;utf-8&#34;</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=creating-a-rinkeby-test-network-environment-alchemy>Creating a Rinkeby Test Network Environment (Alchemy)</h2><p>Debugging smart contracts requires deploying the contract to an actual chain. We choose to deploy to the Rinkeby test network on the Alchemy platform for subsequent debugging and development.</p><h3 id=alchemy-platform>Alchemy Platform</h3><p>First, we visit the <a href=https://dashboard.alchemyapi.io>Alchemy official website</a>, register and log in, and we will see its Dashboard, which displays all created applications.</p><p><img src=https://image.pseudoyu.com/images/alchemy_dashboard.png alt=alchemy_dashboard></p><p>After installation, select Create App to quickly create a Rinkeby test network node.</p><p><img src=https://image.pseudoyu.com/images/alchemy_create_app.png alt=alchemy_create_app></p><p>After creation, click View Details to see the detailed information of the App we just created. Click View Key in the upper right corner to query our node information. We need to record the HTTP URL for subsequent connection use.</p><p><img src=https://image.pseudoyu.com/images/alchemy_app_detail.png alt=alchemy_app_detail></p><h2 id=creating-a-rinkeby-test-account-metamask>Creating a Rinkeby Test Account (MetaMask)</h2><h3 id=metamask>MetaMask</h3><p>After creating the Rinkeby test network environment, we need to create an account through MetaMask, get some test tokens, and record the account&rsquo;s private key for later use.</p><p><img src=https://image.pseudoyu.com/images/metamask_private_key.png alt=metamask_private_key></p><h3 id=obtaining-test-tokens>Obtaining Test Tokens</h3><p>After creating an account, we need some test tokens for subsequent development and debugging. We can obtain them through the following URLs:</p><ul><li><a href=https://faucets.chain.link>https://faucets.chain.link</a></li><li><a href=https://rinkebyfaucet.com/>https://rinkebyfaucet.com/</a></li></ul><h2 id=connecting-to-test-node-and-wallet>Connecting to Test Node and Wallet</h2><h3 id=connecting-to-node>Connecting to Node</h3><p><code>ethers.js</code> provides a library that can easily connect to our test node, where <code>process.env.ALCHEMY_RPC_URL</code> is the HTTP URL of the App we created on the Alchemy platform:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ethers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ethers&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>provider</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ethers</span><span class=p>.</span><span class=nx>providers</span><span class=p>.</span><span class=nx>JsonRpcProvider</span><span class=p>(</span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>ALCHEMY_RPC_URL</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=connecting-to-wallet>Connecting to Wallet</h3><p><code>ethers.js</code> also provides a method to connect to our test wallet, where <code>process.env.RINKEBY_PRIVATE_KEY</code> is the private key we copied from MetaMask.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>ethers</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ethers&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>wallet</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ethers</span><span class=p>.</span><span class=nx>Wallet</span><span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>RINKEBY_PRIVATE_KEY</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>provider</span>
</span></span><span class=line><span class=cl><span class=p>);</span>
</span></span></code></pre></div><h2 id=solidity-contract-deployment>Solidity Contract Deployment</h2><h3 id=creating-contract>Creating Contract</h3><p>We can create a contract through the <code>ethers.js</code> library.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>contractFactory</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ethers</span><span class=p>.</span><span class=nx>ContractFactory</span><span class=p>(</span><span class=nx>abi</span><span class=p>,</span> <span class=nx>binary</span><span class=p>,</span> <span class=nx>wallet</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=deploying-contract>Deploying Contract</h3><p>Below we will introduce how to deploy a contract through the <code>ethers.js</code> library, where the ABI and BIN files of the <code>SimpleStorage</code> contract have been read in the code above.</p><h4 id=creating-contract-1>Creating Contract</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>contractFactory</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>ethers</span><span class=p>.</span><span class=nx>ContractFactory</span><span class=p>(</span><span class=nx>abi</span><span class=p>,</span> <span class=nx>binary</span><span class=p>,</span> <span class=nx>wallet</span><span class=p>);</span>
</span></span></code></pre></div><h4 id=deploying-contract-1>Deploying Contract</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>contract</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>contractFactory</span><span class=p>.</span><span class=nx>deploy</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>await</span> <span class=nx>contract</span><span class=p>.</span><span class=nx>deployTransaction</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=interacting-with-contract>Interacting with Contract</h3><p>We can also interact with the contract through <code>ethers.js</code>.</p><h4 id=retrieve>retrieve()</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>currentFavoriteNumber</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>contract</span><span class=p>.</span><span class=nx>retrieve</span><span class=p>();</span>
</span></span></code></pre></div><h4 id=store>store()</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>transactionResponse</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>contract</span><span class=p>.</span><span class=nx>store</span><span class=p>(</span><span class=s2>&#34;7&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>transactionReceipt</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>transactionResponse</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=constructing-transaction-from-raw-data>Constructing Transaction from Raw Data</h3><p>In addition to directly calling methods to deploy contracts, we can also construct transactions ourselves.</p><h4 id=constructing-transaction>Constructing Transaction</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>nonce</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>wallet</span><span class=p>.</span><span class=nx>getTransactionCount</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>tx</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>nonce</span><span class=o>:</span> <span class=nx>nonce</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>gasPrice</span><span class=o>:</span> <span class=mi>20000000000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>gasLimit</span><span class=o>:</span> <span class=mi>1000000</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>to</span><span class=o>:</span> <span class=kc>null</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>value</span><span class=o>:</span> <span class=mi>0</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>data</span><span class=o>:</span> <span class=s2>&#34;0x&#34;</span> <span class=o>+</span> <span class=nx>binary</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>chainId</span><span class=o>:</span> <span class=mi>1337</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><h4 id=signing-transaction>Signing Transaction</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>signedTx</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>wallet</span><span class=p>.</span><span class=nx>signTransaction</span><span class=p>(</span><span class=nx>tx</span><span class=p>);</span>
</span></span></code></pre></div><h4 id=sending-transaction>Sending Transaction</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>sentTxResponse</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>wallet</span><span class=p>.</span><span class=nx>sendTransaction</span><span class=p>(</span><span class=nx>tx</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=kr>await</span> <span class=nx>sentTxResponse</span><span class=p>.</span><span class=nx>wait</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>The above are the steps for interacting with the Rinkeby test network of Alchemy through the <code>ethers.js</code> library. In actual production project development, we generally do not directly use libraries like <code>ethers.js</code>, but instead use further encapsulated frameworks like Brownie and HardHat. However, understanding how to use libraries like <code>Web3.py</code> or <code>ethers.js</code> is also very important. I will further explain the use of the HardHat framework in the future.</p><h2 id=references>References</h2><blockquote><ol><li><a href=https://www.pseudoyu.com/en/2022/05/25/learn_solidity_from_scratch_basic/>Solidity Smart Contract Development - Basics</a></li><li><a href=https://www.pseudoyu.com/en/2022/05/30/learn_solidity_from_scratch_web3py/>Solidity Smart Contract Development - Mastering Web3.py</a></li><li><a href="https://www.youtube.com/watch?v=gyMwXuJrbJQ">Solidity, Blockchain, and Smart Contract - Javascript Version</a></li><li><a href=https://github.com/ethers-io/ethers.js/>ethers.js Project Repository</a></li><li><a href=https://docs.ethers.io/>ethers.js Official Documentation</a></li><li><a href=https://dashboard.alchemyapi.io>Alchemy Official Website</a></li></ol></blockquote></articl><h2>Related Posts</h2><dl class=row></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2023-09-13</dt><dd class=col-md-9><a href=/en/2023/09/13/weekly_review_20230913/>Weekly Review #46 - Farewell to Long Hair, Weekly Review's Original Intention, and Contract Development</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2023-04-30</dt><dd class=col-md-9><a href=/en/2023/04/30/weekly_review_20230430/>Weekly Review #38 - Foundry Contract Testing, Logseq Task Management, and Surge Ponte Remote Development</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-07-01</dt><dd class=col-md-9><a href=/en/2022/07/01/two_phase_commit_contract_practice_in_solidity/>Implementing Two-Phase Commit in Solidity Smart Contracts Using State Locks</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-06-09</dt><dd class=col-md-9><a href=/en/2022/06/09/learn_solidity_from_scratch_hardhat/>Solidity Smart Contract Development - Using the Hardhat Framework</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-05-30</dt><dd class=col-md-9><a href=/en/2022/05/30/learn_solidity_from_scratch_web3py/>Solidity Smart Contract Development - Mastering Web3.py</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://www.pseudoyu.com><img src=/images/author.webp alt=pseudoyu></a></div><div class=author-content><p class=author-title>Author</p><p class=author-name>pseudoyu</p><p class=author-desc>Backend & Smart Contract Developer, MSc Graduate in ECIC(Electronic Commerce and Internet Computing) @ The University of Hong Kong (HKU). Love to learn and build things. <a href=https://github.com/pseudoyu>Follow me on GitHub</a></p></div></div></div><div align=center><div class=comment-underline></div></div><br><div class=comments><div class=title><span>Comments</span>
<span class=counter><span class=remark42__counter data-url=https://www.pseudoyu.com/en/2022/06/08/learn_solidity_from_scratch_ethersjs/></span></span></div><div id=remark42></div></div><script>var remark_config={host:"https://comments.pseudoyu.com",site_id:"pseudoyu.com",components:["embed","counter"],max_shown_comments:20,simple_view:!0,theme:"light"}</script><script>(function(){const t=window.REMARK42;if(t)t.destroy(),t.createInstance(remark_config);else for(const t of remark_config.components){var n=document,e=n.createElement("script");e.src=`${remark_config.host}/web/${t}.mjs`,e.type="module",e.defer=!0,e.setAttribute("data-no-instant",""),n.head.appendChild(e)}})()</script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Sitemap</div><ul class=list-unstyled><li><a href=https://www.pseudoyu.com/en/tags/>Tags</a></li><li><a href=https://www.pseudoyu.com/en/categories/>Categories</a></li><li><a rel=alternate type=application/rss+xml href=https://www.pseudoyu.com/en/index.xml><i class="fas fa-rss-square"></i> RSS Feed</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Social</div><ul class=list-unstyled><li><a href=https://t.me/pseudoyulife rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/pseudo_yu rel=noopener target=_blank>Twitter</a></li><li><a href=https://www.instagram.com/pseudo.yu/ rel=noopener target=_blank>Instagram</a></li><li><a href=https://space.bilibili.com/5374948/ rel=noopener target=_blank>BiliBili</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Links</div><ul class=list-unstyled><li><a href=https://github.com/pseudoyu rel=noopener target=_blank>Yu's GitHub</a></li><li><a href=https://uptime.pseudoyu.com/status/services rel=noopener target=_blank>Yu's Services</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em><a href="https://stats.pseudoyu.com?access-token=2m1u5i2k413q0733h2a3332w3m1t6r634g1m6n" rel=noopener target=_blank>Yu's blog analytics</a></em></small><br><small><em>Powered by <a href=https://gohugo.io rel=noopener target=_blank>Hugo</a> - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>den</a></em></small><br><small><em><a href=https://www.hku.hk rel=noopener target=_blank>The University of Hong Kong</a> - <a href=https://www.cs.hku.hk rel=noopener target=_blank>CS</a></em></small><br><small>&copy;
Yu Zhang
2020 -
2024</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=scroll-top class=scroll-top accesskey=g><span class=arrow-icon></span></a>
<script>var mybutton=document.getElementById("scroll-top");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script></body></html>