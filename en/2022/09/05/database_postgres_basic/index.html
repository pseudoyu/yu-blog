<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta name=generator content="Hugo 0.105.0"><meta charset=utf-8><title>PostgreSQL Basics and Practice · Pseudoyu</title><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><script data-goatcounter=https://stats.pseudoyu.com/count async src=//stats.pseudoyu.com/count.js></script><meta name=description content="《后来的我们 - 五月天》 Preface Recently, I&amp;rsquo;ve been thinking about organizing and summarizing the technical points and tools commonly used in my work. On one hand, this helps me review these knowledge points and deepen my memory of their usage. On the other hand, it can serve as a reference for future use. Currently, I&amp;rsquo;m planning to cover several core areas including databases,"><meta name=keywords content="hugo,blockchain,programming"><link rel=canonical href=https://www.pseudoyu.com/en/2022/09/05/database_postgres_basic/><link rel=alternate href=https://www.pseudoyu.com/zh/2022/09/05/database_postgres_basic/ hreflang=zh><link rel=alternate href=https://www.pseudoyu.com/de/2022/09/05/database_postgres_basic/ hreflang=de><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css integrity=sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.2.0/css/all.css integrity=sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ crossorigin=anonymous><link rel=stylesheet href=https://www.pseudoyu.com/css/den.css><link rel=stylesheet href=https://www.pseudoyu.com/css/custom.css><meta property="og:title" content="PostgreSQL Basics and Practice"><meta property="og:description" content="《后来的我们 - 五月天》 Preface Recently, I&rsquo;ve been thinking about organizing and summarizing the technical points and tools commonly used in my work. On one hand, this helps me review these knowledge points and deepen my memory of their usage. On the other hand, it can serve as a reference for future use. Currently, I&rsquo;m planning to cover several core areas including databases,"><meta property="og:type" content="article"><meta property="og:url" content="https://www.pseudoyu.com/en/2022/09/05/database_postgres_basic/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-05T23:30:46+08:00"><meta property="article:modified_time" content="2022-09-05T23:30:46+08:00"><meta itemprop=name content="PostgreSQL Basics and Practice"><meta itemprop=description content="《后来的我们 - 五月天》 Preface Recently, I&rsquo;ve been thinking about organizing and summarizing the technical points and tools commonly used in my work. On one hand, this helps me review these knowledge points and deepen my memory of their usage. On the other hand, it can serve as a reference for future use. Currently, I&rsquo;m planning to cover several core areas including databases,"><meta itemprop=datePublished content="2022-09-05T23:30:46+08:00"><meta itemprop=dateModified content="2022-09-05T23:30:46+08:00"><meta itemprop=wordCount content="2521"><meta itemprop=keywords content="database,postgres,programming,work practice series,work,practice,backend,"><meta name=twitter:card content="summary"><meta name=twitter:title content="PostgreSQL Basics and Practice"><meta name=twitter:description content="《后来的我们 - 五月天》 Preface Recently, I&rsquo;ve been thinking about organizing and summarizing the technical points and tools commonly used in my work. On one hand, this helps me review these knowledge points and deepen my memory of their usage. On the other hand, it can serve as a reference for future use. Currently, I&rsquo;m planning to cover several core areas including databases,"></head><body><div class=header-container style=background:linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)),url(https://www.pseudoyu.com/images/background.png);background-position:50%;background-size:cover><div class=container><nav class="header-nav navbar navbar-expand-md navbar-dark light-dark"><div class="header-logo navbar-brand"><a class=float-left href=https://www.pseudoyu.com/en/><img class="mr20 header-logo-image" src=https://www.pseudoyu.com/images/icon.png alt=logo>
Pseudoyu</a></div><button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarNav aria-controls=navbarNav aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="nav-menu collapse navbar-collapse" id=navbarNav><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/category/ideas/>Idea</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/category/tools/>Tool</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/category/develop/>Develop</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/links/>Links</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/about/>About</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/en/search/>Search</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/zh/><i class="fas fa-globe"></i> 简</a></li><li class=nav-item><a class=nav-link href=https://www.pseudoyu.com/de/><i class="fas fa-globe"></i> DE</a></li></ul></div></nav></div><div class="container header-wrapper"><div class=row><div class=col-lg-12><div class=header-content><h1 class=header-title>PostgreSQL Basics and Practice</h1><p class=header-date>Author:
pseudoyu
| <span>2521 words, 6 minutes</span>
| <span class=remark42__counter data-url=https://www.pseudoyu.com/en/2022/09/05/database_postgres_basic/></span> comments
| 2022-09-05
| Category:
<a href=https://www.pseudoyu.com/en/category/develop/>Develop</a></p><div class=header-underline></div><div class=clearfix></div><p class="float-right header-tags"><i class="fas fa-tags" aria-hidden=true></i>
<a href=https://www.pseudoyu.com/en/tag/backend/>backend</a>,
<a href=https://www.pseudoyu.com/en/tag/database/>database</a>,
<a href=https://www.pseudoyu.com/en/tag/postgres/>postgres</a>,
<a href=https://www.pseudoyu.com/en/tag/practice/>practice</a>,
<a href=https://www.pseudoyu.com/en/tag/programming/>programming</a>,
<a href=https://www.pseudoyu.com/en/tag/work/>work</a>,
<a href=https://www.pseudoyu.com/en/tag/work-practice-series/>work practice series</a></p><div class=clearfix></div><p class="float-right translations"><i class="fas fa-language" aria-hidden=true></i>
Translations:
<a href=https://www.pseudoyu.com/zh/2022/09/05/database_postgres_basic/>ZH</a>, <a href=https://www.pseudoyu.com/de/2022/09/05/database_postgres_basic/>DE</a></p></div></div></div></div></div><main><div class="container content"><articl data-pagefind-body><figure><audio controls preload=metadata><source src=/audios/here_after_us.mp3 type=audio/mpeg></audio><i><figcaption>《后来的我们 - 五月天》</figcaption></i></figure><h2 id=preface>Preface</h2><p>Recently, I&rsquo;ve been thinking about organizing and summarizing the technical points and tools commonly used in my work. On one hand, this helps me review these knowledge points and deepen my memory of their usage. On the other hand, it can serve as a reference for future use.</p><p>Currently, I&rsquo;m planning to cover several core areas including databases, CI/CD (GitHub Actions + GitLab CI), containers (Docker + k8s), operations (Ansible, etc.), as well as some summaries of language features, practical Git techniques, and Shell scripting tips. Since I&rsquo;ve only encountered many of these topics at work and done some extended learning on my own, they may not fully align with specific enterprise practices (mostly based on my own experiences and understanding). I hope this can be helpful.</p><p>This article is the PostgreSQL part of the database series. I&rsquo;ve previously summarized MySQL, which you can refer to in &ldquo;MySQL Basic Knowledge and Related Operations&rdquo;.</p><h2 id=overview-of-data-and-databases>Overview of Data and Databases</h2><h3 id=data>Data</h3><p>Fundamentally, data is a type of fact or observed result, a logical summary of objective matters, and a form and carrier of information. People have been managing data since ancient times (even before the concept existed), initially through manual management, then gradually through file systems (like libraries, managing different information by categories), and finally, with the development of computer technology, forming the more convenient and efficient mode of database management.</p><h3 id=database>Database</h3><p>A database is a repository that organizes, stores, and manages data according to a certain data structure. Its main characteristics are:</p><ul><li>Structured</li><li>Shareable</li><li>Low redundancy</li><li>High independence</li><li>Easy to expand</li></ul><p>It&rsquo;s easy to understand that data organized according to different relationships/structures have different characteristics and are suitable for different application scenarios. Currently, there are mainly three types: hierarchical databases, network databases, and relational databases. PostgreSQL, which we will focus on, is a relational database.</p><h3 id=database-management-system-dbms>Database Management System (DBMS)</h3><p>A Database Management System (DBMS) is a system that performs various operations on databases. It has core functions such as establishing and maintaining databases, organizing and managing data storage, controlling databases, defining data, manipulating data, and managing communication between data. Different database management systems handle databases and data differently, and the way data is presented also varies. It often requires choosing an appropriate database management system based on factors such as data scale and business requirements. For example, in situations with massive data and high-concurrency data read/write operations, the performance of relational databases can deteriorate significantly.</p><h2 id=relational-database-management-system-rdbms>Relational Database Management System (RDBMS)</h2><h3 id=main-characteristics>Main Characteristics</h3><p>Relational databases primarily present data in the form of data tables, with each row representing a record and each column corresponding to the data field of the record name. Many rows and columns form a single table, and several single tables form a database. Users/systems query the database through SQL (Structured Query Language).</p><p>Some relational database operations have transactional properties, namely the ACID rules:</p><ul><li>Atomicity</li><li>Consistency</li><li>Isolation</li><li>Durability</li></ul><p>Atomicity means that a series of transaction operations must either all complete or all fail; there is no situation where only part is completed. For example, in a bank transfer scenario, after the transfer occurs, the sender&rsquo;s balance decreases, but if a database operation error occurs and the receiver&rsquo;s balance does not increase, it would cause serious problems.</p><p>Consistency means that after a transaction is completed, the data in the entire database is consistent; there should be no situation where the same data is out of sync within the database.</p><p>Isolation means that different transactions should run independently and without interference. Of course, this sacrifices some efficiency but provides better guarantees for data accuracy.</p><p>Durability means that when a transaction is completed, its changes to the database and its effects on the system are permanent.</p><h3 id=data-integrity>Data Integrity</h3><p>Data integrity is a very important requirement and property of databases, referring to the consistency and reliability of data stored in the database. It is mainly divided into four types:</p><ul><li>Entity integrity</li><li>Domain integrity</li><li>Referential integrity</li><li>User-defined integrity</li></ul><p>Entity integrity requires that each data table has a unique identifier, and the primary key field in each table cannot be empty or duplicate, mainly meaning that the data in the table can be uniquely distinguished.</p><p>Domain integrity is to make some additional restrictions on the columns in the table, such as restricting data types, check constraints, setting default values, whether to allow null values, and value range.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Constraining field uniqueness when creating a table
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=nb>INT</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=n>auto_increment</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>30</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id_number</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>18</span><span class=p>)</span><span class=w> </span><span class=k>UNIQUE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>Referential integrity means that the database does not allow referencing non-existent entities. Tables in the database often have some associations with other tables, and referential integrity can be ensured through foreign key constraints.</p><p>User-defined integrity is to make some semantic restrictions on data according to specific application scenarios and involved data, such as balance cannot be negative, etc. It is generally constrained and limited by setting rules, stored procedures, and triggers.</p><h3 id=mainstream-rdbms>Mainstream RDBMS</h3><p>Currently, the mainstream relational database management systems include:</p><ul><li>SQL Server</li><li>Sybase</li><li>DB2</li><li>Oracle</li><li>MySQL</li><li>PostgreSQL</li></ul><p>Oracle, MySQL, and PostgreSQL are more commonly used by enterprises and individuals. Next, we will use PostgreSQL as an example for detailed operation explanations.</p><h2 id=postgresql>PostgreSQL</h2><h3 id=installation-and-configuration>Installation and Configuration</h3><p>PostgreSQL is a modern open-source object-relational database management system.</p><p>For individual users learning to use it, you can directly download the software installation package to set up a local environment. You can choose different versions according to different systems, and it also has a convenient graphical interface for starting, stopping, restarting services, and making related configurations. This article uses PostgreSQL 14 on macOS as an example. After installing and performing basic settings from the <a href=https://postgresapp.com>official website</a>, you can manage the local PostgreSQL service. The version may vary slightly, but the core functions are not much different.</p><h4 id=graphical-interface>Graphical Interface</h4><p>Open the PostgreSQL.app application, and you will see the following interface:</p><p><img src=https://image.pseudoyu.com/images/mac_postgres_interface.png alt=mac_postgres_interface></p><p>In this management interface, you can conveniently start and stop the PostgreSQL service. Clicking on the corresponding database also allows you to enter the command-line operation interface.</p><h4 id=command-line-interface>Command-line Interface</h4><p>First, we add the <code>psql</code> path to the environment variables for subsequent use. I use <code>zsh</code>, so I add the following content to the <code>~/.zshrc</code> file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># postgres</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=si>${</span><span class=nv>PATH</span><span class=si>}</span>:/Applications/Postgres.app/Contents/Versions/14/bin
</span></span></code></pre></div><p>After that, enter <code>psql</code> in the terminal to access the PostgreSQL command-line interface. You can use the following command to view the psql command list:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>psql --help
</span></span></code></pre></div><h3 id=connecting-to-postgresql>Connecting to PostgreSQL</h3><p>We can connect to the database using the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Connect to the database</span>
</span></span><span class=line><span class=cl>psql -h &lt;host&gt; -p &lt;port&gt; -U &lt;username&gt; &lt;database-name&gt;
</span></span></code></pre></div><p>Of course, we can also use some third-party tools to connect to the database more conveniently. I currently use <a href=http://tableplus.com>TablePlus</a>, which supports PostgreSQL databases, and I recommend it.</p><h3 id=command-line-interaction>Command-line Interaction</h3><p>PostgreSQL provides powerful command-line interaction functionality. We can use <code>\</code> + keyword to perform operations. We can view command details and help information by consulting the documentation or using the <code>\?</code> and <code>help</code> commands. Other commonly used commands are as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># View help</span>
</span></span><span class=line><span class=cl><span class=nb>help</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View psql command details</span>
</span></span><span class=line><span class=cl><span class=se>\?</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View databases (all)</span>
</span></span><span class=line><span class=cl><span class=se>\l</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View databases (specific)</span>
</span></span><span class=line><span class=cl><span class=se>\l</span> &lt;database-name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Connect to a database</span>
</span></span><span class=line><span class=cl><span class=se>\c</span> &lt;database-name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View methods</span>
</span></span><span class=line><span class=cl><span class=se>\d</span>f
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View tables (all)</span>
</span></span><span class=line><span class=cl><span class=se>\d</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View tables (tables only)</span>
</span></span><span class=line><span class=cl><span class=se>\d</span>t
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># View tables (specific)</span>
</span></span><span class=line><span class=cl><span class=se>\d</span> &lt;table-name&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Execute SQL commands</span>
</span></span><span class=line><span class=cl><span class=se>\i</span> &lt;filepath&gt;/&lt;filename&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Open expanded view</span>
</span></span><span class=line><span class=cl><span class=se>\x</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Export to CSV</span>
</span></span><span class=line><span class=cl><span class=se>\c</span>opy <span class=o>(</span>SELECT * FROM person LEFT JOIN car ON person.car_id <span class=o>=</span> car.id<span class=o>)</span> TO <span class=s1>&#39;path/to/output.csv&#39;</span> DELIMITER <span class=s1>&#39;,&#39;</span> CSV HEADER<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Exit</span>
</span></span><span class=line><span class=cl><span class=se>\q</span>
</span></span></code></pre></div><h3 id=core-syntax>Core Syntax</h3><p>After configuring and connecting to the local PostgreSQL, we can perform some operations on the database. SQL language is mainly divided into the following four categories:</p><ul><li>DDL (Data Definition Language)</li><li>DML (Data Manipulation Language)</li><li>DQL (Data Query Language)</li><li>DCL (Data Control Language)</li></ul><h4 id=ddl-operations>DDL Operations</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Create database
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=o>&lt;</span><span class=k>database</span><span class=o>-</span><span class=n>name</span><span class=o>&gt;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Delete database
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DROP</span><span class=w> </span><span class=k>DATABASE</span><span class=w> </span><span class=o>&lt;</span><span class=k>database</span><span class=o>-</span><span class=n>name</span><span class=o>&gt;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Enter a specific database</span>
</span></span><span class=line><span class=cl><span class=se>\c</span> &lt;database-name&gt;<span class=p>;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Create table (add constraints)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=n>BIGSERIAL</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>first_name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>last_name</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>gender</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>date_of_birth</span><span class=w> </span><span class=nb>DATE</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>country_of_birth</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>50</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>email</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>150</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Modify table
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>(</span><span class=n>id</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Delete column
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>DROP</span><span class=w> </span><span class=k>column</span><span class=w> </span><span class=n>email</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Delete entire table
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DROP</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h4 id=dml-operations>DML Operations</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Insert data
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>gender</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>date_of_birth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Yu&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;ZHANG&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;MALE&#39;</span><span class=p>,</span><span class=w> </span><span class=nb>DATE</span><span class=w> </span><span class=s1>&#39;1997-06-06&#39;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Modify data content
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>UPDATE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;ommar@gmail.com&#39;</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>20</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Delete data content
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>DELETE</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>1</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>You can use the <code>ON CONFLICT</code> keyword to handle conflicts:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Do nothing when a conflict occurs
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>gender</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>date_of_birth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Yu&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;ZHANG&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;MALE&#39;</span><span class=p>,</span><span class=w> </span><span class=nb>DATE</span><span class=w> </span><span class=s1>&#39;1997-06-06&#39;</span><span class=p>)</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>CONFLICT</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>DO</span><span class=w> </span><span class=k>NOTHING</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Update specified fields when a conflict occurs
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>INSERT</span><span class=w> </span><span class=k>INTO</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>first_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>last_name</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>gender</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>date_of_birth</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w> </span><span class=k>VALUES</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;Yu&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;ZHANG&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;MALE&#39;</span><span class=p>,</span><span class=w> </span><span class=nb>DATE</span><span class=w> </span><span class=s1>&#39;1997-06-06&#39;</span><span class=p>)</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>CONFLICT</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>)</span><span class=w> </span><span class=k>DO</span><span class=w> </span><span class=k>UPDATE</span><span class=w> </span><span class=k>SET</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>EXCLUDED</span><span class=p>.</span><span class=n>email</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h4 id=dql-operations>DQL Operations</h4><p>You can query the table using the <code>SELECT</code> command. The most commonly used command to view the entire table is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- View all data in the table
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Query data (specific fields)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>You can use the <code>WHERE</code> keyword for conditional queries and combination queries with multiple conditions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Query data (condition filtering, WHERE | AND | OR | comparison &gt; | &gt;= | &lt; | &lt;= | = | &lt;&gt;)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>gender</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;MALE&#39;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=p>(</span><span class=n>country_of_birth</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Poland&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>country_of_birth</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;China&#39;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p><code>IN</code>, <code>BETWEEN</code>, <code>LIKE</code>, and <code>ILIKE</code> are also some keywords that can be used flexibly for queries.</p><p><code>IN</code> can help us filter multiple values of a certain field.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Query data (using IN keyword)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>country_of_birth</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=p>(</span><span class=s1>&#39;China&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Brazil&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;France&#39;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p><code>BETWEEN</code> can help us filter a range of a certain field.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Query data (using BETWEEN keyword)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>date_of_birth</span><span class=w> </span><span class=k>BETWEEN</span><span class=w> </span><span class=nb>DATE</span><span class=w> </span><span class=s1>&#39;2021-10-10&#39;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=s1>&#39;2022-08-31&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p><code>LIKE</code> can help us perform some fuzzy searches for inclusion relationships. <code>%</code> can match any character, <code>_</code> can match a single character. <code>ILIKE</code> is case-insensitive <code>LIKE</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Query data (using LIKE/ILIKE keywords, _ | %)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;%@bloomberg.%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=k>LIKE</span><span class=w> </span><span class=s1>&#39;________@google.%&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>country_of_birth</span><span class=w> </span><span class=k>ILIKE</span><span class=w> </span><span class=s1>&#39;p%&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>In practical applications, the data volume of data tables is often very large, and data needs to be grouped according to corresponding conditions. This requires the use of the <code>GROUP BY</code> keyword, and <code>HAVING</code> is used for further filtering conditions. <code>GROUP BY</code> needs to be used in conjunction with aggregate functions.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Query data (using GROUP BY keyword for grouped queries, using HAVING keyword to add conditions, using AS for result aliases)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>country_of_birth</span><span class=p>,</span><span class=w> </span><span class=k>COUNT</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>Amount</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>country_of_birth</span><span class=w> </span><span class=k>HAVING</span><span class=w> </span><span class=n>Amount</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>country_of_birth</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>Sometimes we only need to return unique values and need to remove duplicate data. In this case, we can use the <code>DISTINCT</code> keyword.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Query data (remove duplicates)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=k>DISTINCT</span><span class=w> </span><span class=n>country_of_birth</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>In practical applications, it is also very likely that we need to rank certain product transaction volumes, arrange some values, or display blog posts in chronological order, etc. This requires the use of the <code>ORDER BY</code> keyword, which defaults to <code>ASC</code> ascending order, and can be manually set to <code>DESC</code> for descending order.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Query data (sort ASC | DESC)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>id</span><span class=p>,</span><span class=w> </span><span class=n>country_of_birth</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>At the same time, some databases have very large amounts of data, and returning all data at once is resource-consuming. Therefore, we can use the <code>LIMIT</code> keyword to constrain the number of returned records, and use <code>OFFSET</code> to specify the offset.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Query data (specify quantity and offset)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>OFFSET</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=k>LIMIT</span><span class=w> </span><span class=mi>10</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>OFFSET</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=k>FETCH</span><span class=w> </span><span class=k>FIRST</span><span class=w> </span><span class=mi>5</span><span class=w> </span><span class=k>ROW</span><span class=w> </span><span class=k>ONLY</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h3 id=core-concepts>Core Concepts</h3><h4 id=primary-key>PRIMARY KEY</h4><p>The primary key is the unique identity record in the data table, created and modified with the following commands:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Add primary key
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=n>BIGSERIAL</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Modify primary key
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>(</span><span class=n>id</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>The primary key usually uses <code>SERIAL/BIGSERIAL</code> incremental <code>INT</code> values, or <code>UUID</code> can be used as the primary key.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=n>UUID</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h4 id=foreign-key>FOREIGN KEY</h4><p>A foreign key is a special type of primary key that is the primary key of another table, created and modified with the following commands:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Add foreign key
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=n>BIGSERIAL</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>car_id</span><span class=w> </span><span class=nb>BIGINT</span><span class=w> </span><span class=k>REFERENCES</span><span class=w> </span><span class=n>car</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>UNIQUE</span><span class=p>(</span><span class=n>car_id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- Modify foreign key
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>car</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=n>BIGSERIAL</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><h4 id=join>JOIN</h4><p>A join query refers to connecting data from multiple tables during a query to retrieve more information. In SQL, we can use the <code>JOIN</code> keyword to implement join queries, use the <code>LEFT JOIN</code> keyword to implement left join queries, and use the <code>RIGHT JOIN</code> keyword to implement right join queries.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- JOIN query
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>JOIN</span><span class=w> </span><span class=n>car</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>person</span><span class=p>.</span><span class=n>car_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>car</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>--- LEFT JOIN query
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>car</span><span class=w> </span><span class=k>ON</span><span class=w> </span><span class=n>person</span><span class=p>.</span><span class=n>car_id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>car</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span></code></pre></div><p>You can use the <code>USING</code> keyword to simplify the use of the <code>ON</code> keyword.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LEFT</span><span class=w> </span><span class=k>JOIN</span><span class=w> </span><span class=n>car</span><span class=w> </span><span class=k>USING</span><span class=w> </span><span class=p>(</span><span class=n>car_id</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h4 id=constraints>Constraints</h4><p>CONSTRAINT is used to restrict the data in the data table. We can add constraints using the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=k>CONSTRAINT</span><span class=w> </span><span class=n>gender_constraint</span><span class=w> </span><span class=k>CHECK</span><span class=w> </span><span class=p>(</span><span class=n>gender</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Female&#39;</span><span class=w> </span><span class=k>OR</span><span class=w> </span><span class=n>gender</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Male&#39;</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>For example, add <code>UNIQUE</code> to indicate uniqueness:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w> </span><span class=n>BIGSERIAL</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>email</span><span class=w> </span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>150</span><span class=p>)</span><span class=w> </span><span class=k>UNIQUE</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ALTER</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>person</span><span class=w> </span><span class=k>ADD</span><span class=w> </span><span class=n>CONTRAINT</span><span class=w> </span><span class=n>unique_email_address</span><span class=w> </span><span class=k>UNIQUE</span><span class=w> </span><span class=p>(</span><span class=n>email</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h3 id=useful-techniques>Useful Techniques</h3><h4 id=aggregate-functions>Aggregate Functions</h4><p>Many aggregate functions are built-in, such as <code>COUNT</code>, <code>SUM</code>, <code>AVG</code>, <code>MIN</code>, <code>MAX</code>, etc., used for aggregate calculations on data.</p><h4 id=coalesce>COALESCE</h4><p>When querying data, we can use <code>COALESCE</code> to fill in default values:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>--- Use COALESCE to fill in default values
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>SELECT</span><span class=w> </span><span class=n>COALESCE</span><span class=p>(</span><span class=n>email</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Email Not Provided&#39;</span><span class=p>)</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h4 id=nullif>NULLIF</h4><p>Using the <code>NULLIF</code> keyword, when the second parameter is the same as the first, it returns <code>NULL</code>, otherwise it returns the first parameter. This is used to prevent errors such as division by zero.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>COALESCE</span><span class=p>(</span><span class=mi>10</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=k>NULLIF</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>),</span><span class=w> </span><span class=mi>0</span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><h4 id=time>Time</h4><p>The display format for time is as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>NOW</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>NOW</span><span class=p>()::</span><span class=nb>DATE</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>NOW</span><span class=p>()::</span><span class=n>TIME</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>We can perform calculations on time:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;1 YEAR&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;10 MONTHS&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=p>(</span><span class=n>NOW</span><span class=p>()</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=nb>INTERVAL</span><span class=w> </span><span class=s1>&#39;3 DAYS&#39;</span><span class=p>)::</span><span class=nb>DATE</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>We can use <code>EXTRACT</code> to get a certain part of the time:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=k>EXTRACT</span><span class=p>(</span><span class=k>YEAR</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>NOW</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>EXTRACT</span><span class=p>(</span><span class=k>MONTH</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>NOW</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>EXTRACT</span><span class=p>(</span><span class=k>DAY</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>NOW</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>EXTRACT</span><span class=p>(</span><span class=n>DOW</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>NOW</span><span class=p>());</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=k>EXTRACT</span><span class=p>(</span><span class=n>CENTURY</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>NOW</span><span class=p>());</span><span class=w>
</span></span></span></code></pre></div><p>We can use the <code>AGE</code> keyword to calculate age differences:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>first_name</span><span class=p>,</span><span class=w> </span><span class=n>last_name</span><span class=p>,</span><span class=w> </span><span class=n>AGE</span><span class=p>(</span><span class=n>NOW</span><span class=p>(),</span><span class=w> </span><span class=n>date_of_birth</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>age</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>person</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h3 id=extended-support>Extended Support</h3><p>PostgreSQL provides many extensions to implement richer functionality.</p><h4 id=installing-extensions>Installing Extensions</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=n>EXTENSION</span><span class=w> </span><span class=k>IF</span><span class=w> </span><span class=k>NOT</span><span class=w> </span><span class=k>EXISTS</span><span class=w> </span><span class=s2>&#34;uuid-ossp&#34;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h4 id=view-extension-methods>View Extension Methods</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>df
</span></span></code></pre></div><h4 id=using-extension-methods>Using Extension Methods</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=n>uuid_generate_v4</span><span class=p>();</span><span class=w>
</span></span></span></code></pre></div><h2 id=conclusion>Conclusion</h2><p>The above is my explanation of the basic knowledge and practical operations of PostgreSQL. I hope it&rsquo;s helpful to you.</p><h2 id=references>References</h2><blockquote><ol><li><a href=http://www.postgresql.org>PostgreSQL Official Website</a></li><li><a href=https://postgresapp.com>Postgres.app Official Website</a></li><li><a href=https://tableplus.com>TablePlus Official Website</a></li></ol></blockquote></articl><h2>Related Posts</h2><dl class=row></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2024-08-05</dt><dd class=col-md-9><a href=/en/2024/08/05/weekly_review_20240805/>Weekly Review #67 - Reshaping My Information Input System with Follow</a></dd></dl></dl></dl><dt class=col-md-3>2024-07-30</dt><dd class=col-md-9><a href=/en/2024/07/30/weekly_review_20240730/>Weekly Review #66 - 10x Engineers, Technical Passion and Personal Toolkit</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2022-09-07</dt><dd class=col-md-9><a href=/en/2022/09/07/container_docker_basic/>Docker Fundamentals and Practices</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><dt class=col-md-3>2021-03-29</dt><dd class=col-md-9><a href=/en/2021/03/29/database_mysql_basic/>MySQL Fundamentals and Practice</a></dd></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl></dl><div class=author-card><div class=underline></div><div class=author-box><div class=author-image><a href=https://www.pseudoyu.com><img src=/images/author.webp alt=pseudoyu></a></div><div class=author-content><p class=author-title>Author</p><p class=author-name>pseudoyu</p><p class=author-desc>Backend & Smart Contract Developer, MSc Graduate in ECIC(Electronic Commerce and Internet Computing) @ The University of Hong Kong (HKU). Love to learn and build things. <a href=https://github.com/pseudoyu>Follow me on GitHub</a></p></div></div></div><div align=center><div class=comment-underline></div></div><br><div class=comments><div class=title><span>Comments</span>
<span class=counter><span class=remark42__counter data-url=https://www.pseudoyu.com/en/2022/09/05/database_postgres_basic/></span></span></div><div id=remark42></div></div><script>var remark_config={host:"https://comments.pseudoyu.com",site_id:"pseudoyu.com",components:["embed","counter"],max_shown_comments:20,simple_view:!0,theme:"light"}</script><script>(function(){const t=window.REMARK42;if(t)t.destroy(),t.createInstance(remark_config);else for(const t of remark_config.components){var n=document,e=n.createElement("script");e.src=`${remark_config.host}/web/${t}.mjs`,e.type="module",e.defer=!0,e.setAttribute("data-no-instant",""),n.head.appendChild(e)}})()</script></div></main><div class="footer gradient-2"><div class="container footer-container"><div class=row><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Sitemap</div><ul class=list-unstyled><li><a href=https://www.pseudoyu.com/en/tags/>Tags</a></li><li><a href=https://www.pseudoyu.com/en/categories/>Categories</a></li><li><a rel=alternate type=application/rss+xml href=https://www.pseudoyu.com/en/index.xml><i class="fas fa-rss-square"></i> RSS Feed</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Social</div><ul class=list-unstyled><li><a href=https://t.me/pseudoyulife rel=noopener target=_blank>Telegram</a></li><li><a href=https://twitter.com/pseudo_yu rel=noopener target=_blank>Twitter</a></li><li><a href=https://www.instagram.com/pseudo.yu/ rel=noopener target=_blank>Instagram</a></li><li><a href=https://space.bilibili.com/5374948/ rel=noopener target=_blank>BiliBili</a></li></ul></div><div class="col-xs-4 col-sm-3 col-md-3 col-lg-3"><div class=footer-title>Links</div><ul class=list-unstyled><li><a href=https://github.com/pseudoyu rel=noopener target=_blank>Yu's GitHub</a></li></ul></div><div class="col-xs-12 col-sm-3 col-md-3 col-lg-3"><p class="pull-right text-right"><small><em><a href="https://stats.pseudoyu.com?access-token=2m1u5i2k413q0733h2a3332w3m1t6r634g1m6n" rel=noopener target=_blank>Yu's blog analytics</a></em></small><br><small><em>Powered by <a href=https://gohugo.io rel=noopener target=_blank>Hugo</a> - <a href=https://github.com/shaform/hugo-theme-den rel=noopener target=_blank>den</a></em></small><br><small><em><a href=https://www.hku.hk rel=noopener target=_blank>The University of Hong Kong</a> - <a href=https://www.cs.hku.hk rel=noopener target=_blank>CS</a></em></small><br><small>&copy;
Yu Zhang
2020 -
2024</small></p></div><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" id=scroll-top class=scroll-top accesskey=g><span class=arrow-icon></span></a>
<script>var mybutton=document.getElementById("scroll-top");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></div></div></div><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script></body></html>